{"version":3,"file":"token-editor.min.js","sources":["../lib/bullseye.js","auto-complete.js","token-editor.js"],"names":["e","exports","module","define","amd","f","window","global","self","bullseye","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"el","target","options","sleep","tailorOptions","sleeping","readNull","read","readings","bounds","getBoundingClientRect","scrollTop","document","body","documentElement","tailor","x","absolute","left","y","top","update","write","destroyed","refresh","p","offsetHeight","style","destroy","crossvent","remove","throttledWrite","domTarget","tagName","arguments","throttle","autoupdateToCaret","caret","tailormade","tracking","add","./tailormade","./throttle",2,"useNative","NativeCustomEvent","detail","foo","type","CustomEvent","createEvent","params","initCustomEvent","bubbles","cancelable","createEventObject","Boolean","this",3,"addEventEasy","fn","capturing","addEventListener","addEventHard","attachEvent","wrap","removeEventEasy","removeEventListener","removeEventHard","detachEvent","unwrap","fabricateEvent","model","makeClassicEvent","doc","initEvent","makeCustomEvent","customEvent","eventmap","indexOf","dispatchEvent","fireEvent","wrapperFactory","originalEvent","event","srcElement","preventDefault","returnValue","stopPropagation","cancelBubble","which","keyCode","wrapper","hardCache","push","element","find","splice","item","addEvent","removeEvent","fabricate","./eventmap","custom-event",4,"eventname","ron","test","slice",5,"getSelection","getSelectionRaw","getSelectionNullOp","getSelectionSynthetic","isHost","method","selection","./getSelectionNullOp","./getSelectionRaw","./getSelectionSynthetic","./isHost",6,"noop","removeAllRanges","addRange",7,8,"GetSelection","range","createRange","_selection","_ranges","updateControlSelection","isTextRange","updateFromTextRange","updateEmptySelection","createControlSelection","sel","ranges","controlRange","createControlRange","len","getSingleElementFromRange","select","removeRangeManually","getAllRanges","isSameRange","rangeCount","updateAnchorAndFocusFromRange","anchorPrefix","focusPrefix","anchorNode","anchorOffset","focusNode","focusOffset","isCollapsed","rangeContainsSingleElement","rangeNodes","nodeType","isAncestorOf","nodes","getNodes","text","collapsed","selectNode","addRangeToControlSelection","rangeElement","newControlRange","right","startContainer","startOffset","endContainer","endOffset","ancestor","descendant","node","parentNode","rangeToTextRange","GetSelectionProto","prototype","textRange","empty","createTextRange","setRanges","getRangeAt","index","cloneRange","removeRange","removed","eachRange","setSingleRange","./rangeToTextRange",9,"isHostMethod","host","prop","isHostProperty","many","props","methods","property","properties",10,"createBoundaryTextRange","offset","startRange","endRange","setEndPoint","isCharacterDataNode","starting","bound","parent","workingNode","childNodes","data","createElement","innerHTML","insertBefore","appendChild","moveToElementText","collapse","removeChild",11,"setSelection","get","set","./getSelection","./setSelection",12,"modernSelection","setEnd","setStart","oldSelection",13,"easyGet","start","selectionStart","end","selectionEnd","hardGet","result","active","focus","blur","activeElement","bookmark","getBookmark","original","value","marker","getUniqueMarker","parentElement","inputs","contents","moveToBookmark","lastIndexOf","Math","random","Date","easySet","parse","hardSet","moveEnd","moveStart","sell",14,"readPosition","textInput","coordsText","coordsHTML","context","prepare","readTextCoords","mirror","needsToWorkAroundNewlineBug","nodeName","offsetLeft","offsetTop","getClientRects","rects","rest","computed","substring","textContent","replace","parseInt","copy","win","getComputedStyle","currentStyle","wordWrap","whiteSpace","position","visibility","forEach","ff","width","scrollHeight","height","overflowY","overflow","bind","op","throttledRefresh","seleccion","mozInnerScreenX",15,"boundary","timer","last","Infinity","unbound","clearTimeout","next","now","setTimeout","Backbone","View","extend","className","menu","_defaultOptions","items","minLen","maxResults","minScore","events","click > div","initialize","_","hide","setItems","bindKeyboardEvents","onKeydown","_onKeydown","onKeyup","_onKeyup","unbindKeyboardEvents","onSelect","selectPrev","selectNext","_selectIndex","selected","indx","classList","onClick","Modal","alert","trigger","render","word","$el","html","menuFor","show","addMenuItem","m","append","id","label","_score","str","term","LiquidMetal","_noScoreWarning","score","console","warn","_scoreItem","scores","hint","Array","isArray","sort","pop","sortBy","isShowing","AutoCompleteView","autoComplete","multiLines","allowPaste","allowStyling","editing","dblClickToEdit","dblclick","click","keydown","keyup","keypress","paste","tokenEditor","history","historyAt","autoCompleteOptions","subview","listenTo","onAutoCompleteSelect","setAutoCompleteItems","setValue","markHistory","edit","isEditing","contentEditable","doEdit","delegateEvents","val","jsonToHTML","endWithBrTag","replaceWithToken","onDblClick","focusEnd","onBlur","makeToken","d","each","attrs","key","setAttribute","outerHTML","insertToken","insertHTML","token","historyTimeout","lastSpace","deleteContents","currentWord","onPaste","markHistoryIn","metaKey","shiftKey","redo","undo","execCommand","defer","keyupTimeout","onKeypress","match","isInFocus","frag","createDocumentFragment","br","setStartBefore","lastNode","firstChild","insertNode","setStartAfter","innerText","trim","atChar","undefined","selectAll","json","lines","map","row","reduce","_objectTextareaObjectToHTML","join","clone","toHTML","toString","lineSeparator","stripTags","toJSON","split","div","dataset","toObjectTextarea","startNode","endNode","count","nextSibling","preSelectionRange","selectNodeContents","ctrlKey","altKey","Number","MAX_VALUE","content","ms","applyHistory","hist"],"mappings":"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qD,eACAgX,QAAAra,KAAAzD,GAAAwN,YAGA/J,KAAA+U,UAAA/U,KAAA8U,QAAAzY,OAAA,GAGA6a,cAAA,SAAAoD,IACAvK,aAAA/P,KAAA6W,gBACA7W,KAAA6W,eAAA3G,WAAAlQ,KAAAsV,YAAAlG,KAAApP,MAAAsa,IAAA,IAGAhD,KAAA,WACAtX,KAAA+U,WAAA,GACA/U,KAAAua,aAAAva,KAAA8U,UAAA9U,KAAA+U,aAGAsC,KAAA,WACArX,KAAA+U,WAAA/U,KAAA8U,QAAAzY,OAAA,GACA2D,KAAAua,aAAAva,KAAA8U,UAAA9U,KAAA+U,aAGAwF,aAAA,SAAAC,MACAxa,KAAAzD,GAAAwN,UAAAyQ,KAAAH,QACAra,KAAAsK,aAAAkQ,KAAA5b,MAAAsM,MAAAsP,KAAA5b,MAAAwM;AFviBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define('../lib/bullseye',[],e);else{var f;\"undefined\"!=typeof window?f=window:\"undefined\"!=typeof global?f=global:\"undefined\"!=typeof self&&(f=self),f.bullseye=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar crossvent = require('crossvent');\nvar throttle = require('./throttle');\nvar tailormade = require('./tailormade');\n\nfunction bullseye (el, target, options) {\n  var o = options;\n  var domTarget = target && target.tagName;\n\n  if (!domTarget && arguments.length === 2) {\n    o = target;\n  }\n  if (!domTarget) {\n    target = el;\n  }\n  if (!o) { o = {}; }\n\n  var destroyed = false;\n  var throttledWrite = throttle(write, 30);\n  var tailorOptions = { update: o.autoupdateToCaret !== false && update };\n  var tailor = o.caret && tailormade(target, tailorOptions);\n\n  write();\n\n  if (o.tracking !== false) {\n    crossvent.add(window, 'resize', throttledWrite);\n  }\n\n  return {\n    read: readNull,\n    refresh: write,\n    destroy: destroy,\n    sleep: sleep\n  };\n\n  function sleep () {\n    tailorOptions.sleeping = true;\n  }\n\n  function readNull () { return read(); }\n\n  function read (readings) {\n    var bounds = target.getBoundingClientRect();\n    var scrollTop = document.body.scrollTop || document.documentElement.scrollTop;\n    if (tailor) {\n      readings = tailor.read();\n      return {\n        x: (readings.absolute ? 0 : bounds.left) + readings.x,\n        y: (readings.absolute ? 0 : bounds.top) + scrollTop + readings.y + 20\n      };\n    }\n    return {\n      x: bounds.left,\n      y: bounds.top + scrollTop\n    };\n  }\n\n  function update (readings) {\n    write(readings);\n  }\n\n  function write (readings) {\n    if (destroyed) {\n      throw new Error('Bullseye can\\'t refresh after being destroyed. Create another instance instead.');\n    }\n    if (tailor && !readings) {\n      tailorOptions.sleeping = false;\n      tailor.refresh(); return;\n    }\n    var p = read(readings);\n    if (!tailor && target !== el) {\n      p.y += target.offsetHeight;\n    }\n    el.style.left = p.x + 'px';\n    el.style.top = p.y + 'px';\n  }\n\n  function destroy () {\n    if (tailor) { tailor.destroy(); }\n    crossvent.remove(window, 'resize', throttledWrite);\n    destroyed = true;\n  }\n}\n\nmodule.exports = bullseye;\n\n},{\"./tailormade\":14,\"./throttle\":15,\"crossvent\":3}],2:[function(require,module,exports){\n(function (global){\n\nvar NativeCustomEvent = global.CustomEvent;\n\nfunction useNative () {\n  try {\n    var p = new NativeCustomEvent('cat', { detail: { foo: 'bar' } });\n    return  'cat' === p.type && 'bar' === p.detail.foo;\n  } catch (e) {\n  }\n  return false;\n}\n\n/**\n * Cross-browser `CustomEvent` constructor.\n *\n * https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent.CustomEvent\n *\n * @public\n */\n\nmodule.exports = useNative() ? NativeCustomEvent :\n\n// IE >= 9\n'function' === typeof document.createEvent ? function CustomEvent (type, params) {\n  var e = document.createEvent('CustomEvent');\n  if (params) {\n    e.initCustomEvent(type, params.bubbles, params.cancelable, params.detail);\n  } else {\n    e.initCustomEvent(type, false, false, void 0);\n  }\n  return e;\n} :\n\n// IE <= 8\nfunction CustomEvent (type, params) {\n  var e = document.createEventObject();\n  e.type = type;\n  if (params) {\n    e.bubbles = Boolean(params.bubbles);\n    e.cancelable = Boolean(params.cancelable);\n    e.detail = params.detail;\n  } else {\n    e.bubbles = false;\n    e.cancelable = false;\n    e.detail = void 0;\n  }\n  return e;\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9jcm9zc3ZlbnQvbm9kZV9tb2R1bGVzL2N1c3RvbS1ldmVudC9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIlxudmFyIE5hdGl2ZUN1c3RvbUV2ZW50ID0gZ2xvYmFsLkN1c3RvbUV2ZW50O1xuXG5mdW5jdGlvbiB1c2VOYXRpdmUgKCkge1xuICB0cnkge1xuICAgIHZhciBwID0gbmV3IE5hdGl2ZUN1c3RvbUV2ZW50KCdjYXQnLCB7IGRldGFpbDogeyBmb286ICdiYXInIH0gfSk7XG4gICAgcmV0dXJuICAnY2F0JyA9PT0gcC50eXBlICYmICdiYXInID09PSBwLmRldGFpbC5mb287XG4gIH0gY2F0Y2ggKGUpIHtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogQ3Jvc3MtYnJvd3NlciBgQ3VzdG9tRXZlbnRgIGNvbnN0cnVjdG9yLlxuICpcbiAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9DdXN0b21FdmVudC5DdXN0b21FdmVudFxuICpcbiAqIEBwdWJsaWNcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IHVzZU5hdGl2ZSgpID8gTmF0aXZlQ3VzdG9tRXZlbnQgOlxuXG4vLyBJRSA+PSA5XG4nZnVuY3Rpb24nID09PSB0eXBlb2YgZG9jdW1lbnQuY3JlYXRlRXZlbnQgPyBmdW5jdGlvbiBDdXN0b21FdmVudCAodHlwZSwgcGFyYW1zKSB7XG4gIHZhciBlID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0N1c3RvbUV2ZW50Jyk7XG4gIGlmIChwYXJhbXMpIHtcbiAgICBlLmluaXRDdXN0b21FdmVudCh0eXBlLCBwYXJhbXMuYnViYmxlcywgcGFyYW1zLmNhbmNlbGFibGUsIHBhcmFtcy5kZXRhaWwpO1xuICB9IGVsc2Uge1xuICAgIGUuaW5pdEN1c3RvbUV2ZW50KHR5cGUsIGZhbHNlLCBmYWxzZSwgdm9pZCAwKTtcbiAgfVxuICByZXR1cm4gZTtcbn0gOlxuXG4vLyBJRSA8PSA4XG5mdW5jdGlvbiBDdXN0b21FdmVudCAodHlwZSwgcGFyYW1zKSB7XG4gIHZhciBlID0gZG9jdW1lbnQuY3JlYXRlRXZlbnRPYmplY3QoKTtcbiAgZS50eXBlID0gdHlwZTtcbiAgaWYgKHBhcmFtcykge1xuICAgIGUuYnViYmxlcyA9IEJvb2xlYW4ocGFyYW1zLmJ1YmJsZXMpO1xuICAgIGUuY2FuY2VsYWJsZSA9IEJvb2xlYW4ocGFyYW1zLmNhbmNlbGFibGUpO1xuICAgIGUuZGV0YWlsID0gcGFyYW1zLmRldGFpbDtcbiAgfSBlbHNlIHtcbiAgICBlLmJ1YmJsZXMgPSBmYWxzZTtcbiAgICBlLmNhbmNlbGFibGUgPSBmYWxzZTtcbiAgICBlLmRldGFpbCA9IHZvaWQgMDtcbiAgfVxuICByZXR1cm4gZTtcbn1cbiJdfQ==\n},{}],3:[function(require,module,exports){\n(function (global){\n'use strict';\n\nvar customEvent = require('custom-event');\nvar eventmap = require('./eventmap');\nvar doc = document;\nvar addEvent = addEventEasy;\nvar removeEvent = removeEventEasy;\nvar hardCache = [];\n\nif (!global.addEventListener) {\n  addEvent = addEventHard;\n  removeEvent = removeEventHard;\n}\n\nfunction addEventEasy (el, type, fn, capturing) {\n  return el.addEventListener(type, fn, capturing);\n}\n\nfunction addEventHard (el, type, fn) {\n  return el.attachEvent('on' + type, wrap(el, type, fn));\n}\n\nfunction removeEventEasy (el, type, fn, capturing) {\n  return el.removeEventListener(type, fn, capturing);\n}\n\nfunction removeEventHard (el, type, fn) {\n  return el.detachEvent('on' + type, unwrap(el, type, fn));\n}\n\nfunction fabricateEvent (el, type, model) {\n  var e = eventmap.indexOf(type) === -1 ? makeCustomEvent() : makeClassicEvent();\n  if (el.dispatchEvent) {\n    el.dispatchEvent(e);\n  } else {\n    el.fireEvent('on' + type, e);\n  }\n  function makeClassicEvent () {\n    var e;\n    if (doc.createEvent) {\n      e = doc.createEvent('Event');\n      e.initEvent(type, true, true);\n    } else if (doc.createEventObject) {\n      e = doc.createEventObject();\n    }\n    return e;\n  }\n  function makeCustomEvent () {\n    return new customEvent(type, { detail: model });\n  }\n}\n\nfunction wrapperFactory (el, type, fn) {\n  return function wrapper (originalEvent) {\n    var e = originalEvent || global.event;\n    e.target = e.target || e.srcElement;\n    e.preventDefault = e.preventDefault || function preventDefault () { e.returnValue = false; };\n    e.stopPropagation = e.stopPropagation || function stopPropagation () { e.cancelBubble = true; };\n    e.which = e.which || e.keyCode;\n    fn.call(el, e);\n  };\n}\n\nfunction wrap (el, type, fn) {\n  var wrapper = unwrap(el, type, fn) || wrapperFactory(el, type, fn);\n  hardCache.push({\n    wrapper: wrapper,\n    element: el,\n    type: type,\n    fn: fn\n  });\n  return wrapper;\n}\n\nfunction unwrap (el, type, fn) {\n  var i = find(el, type, fn);\n  if (i) {\n    var wrapper = hardCache[i].wrapper;\n    hardCache.splice(i, 1); // free up a tad of memory\n    return wrapper;\n  }\n}\n\nfunction find (el, type, fn) {\n  var i, item;\n  for (i = 0; i < hardCache.length; i++) {\n    item = hardCache[i];\n    if (item.element === el && item.type === type && item.fn === fn) {\n      return i;\n    }\n  }\n}\n\nmodule.exports = {\n  add: addEvent,\n  remove: removeEvent,\n  fabricate: fabricateEvent\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9jcm9zc3ZlbnQvc3JjL2Nyb3NzdmVudC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBjdXN0b21FdmVudCA9IHJlcXVpcmUoJ2N1c3RvbS1ldmVudCcpO1xudmFyIGV2ZW50bWFwID0gcmVxdWlyZSgnLi9ldmVudG1hcCcpO1xudmFyIGRvYyA9IGRvY3VtZW50O1xudmFyIGFkZEV2ZW50ID0gYWRkRXZlbnRFYXN5O1xudmFyIHJlbW92ZUV2ZW50ID0gcmVtb3ZlRXZlbnRFYXN5O1xudmFyIGhhcmRDYWNoZSA9IFtdO1xuXG5pZiAoIWdsb2JhbC5hZGRFdmVudExpc3RlbmVyKSB7XG4gIGFkZEV2ZW50ID0gYWRkRXZlbnRIYXJkO1xuICByZW1vdmVFdmVudCA9IHJlbW92ZUV2ZW50SGFyZDtcbn1cblxuZnVuY3Rpb24gYWRkRXZlbnRFYXN5IChlbCwgdHlwZSwgZm4sIGNhcHR1cmluZykge1xuICByZXR1cm4gZWwuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBmbiwgY2FwdHVyaW5nKTtcbn1cblxuZnVuY3Rpb24gYWRkRXZlbnRIYXJkIChlbCwgdHlwZSwgZm4pIHtcbiAgcmV0dXJuIGVsLmF0dGFjaEV2ZW50KCdvbicgKyB0eXBlLCB3cmFwKGVsLCB0eXBlLCBmbikpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVFdmVudEVhc3kgKGVsLCB0eXBlLCBmbiwgY2FwdHVyaW5nKSB7XG4gIHJldHVybiBlbC5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGZuLCBjYXB0dXJpbmcpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVFdmVudEhhcmQgKGVsLCB0eXBlLCBmbikge1xuICByZXR1cm4gZWwuZGV0YWNoRXZlbnQoJ29uJyArIHR5cGUsIHVud3JhcChlbCwgdHlwZSwgZm4pKTtcbn1cblxuZnVuY3Rpb24gZmFicmljYXRlRXZlbnQgKGVsLCB0eXBlLCBtb2RlbCkge1xuICB2YXIgZSA9IGV2ZW50bWFwLmluZGV4T2YodHlwZSkgPT09IC0xID8gbWFrZUN1c3RvbUV2ZW50KCkgOiBtYWtlQ2xhc3NpY0V2ZW50KCk7XG4gIGlmIChlbC5kaXNwYXRjaEV2ZW50KSB7XG4gICAgZWwuZGlzcGF0Y2hFdmVudChlKTtcbiAgfSBlbHNlIHtcbiAgICBlbC5maXJlRXZlbnQoJ29uJyArIHR5cGUsIGUpO1xuICB9XG4gIGZ1bmN0aW9uIG1ha2VDbGFzc2ljRXZlbnQgKCkge1xuICAgIHZhciBlO1xuICAgIGlmIChkb2MuY3JlYXRlRXZlbnQpIHtcbiAgICAgIGUgPSBkb2MuY3JlYXRlRXZlbnQoJ0V2ZW50Jyk7XG4gICAgICBlLmluaXRFdmVudCh0eXBlLCB0cnVlLCB0cnVlKTtcbiAgICB9IGVsc2UgaWYgKGRvYy5jcmVhdGVFdmVudE9iamVjdCkge1xuICAgICAgZSA9IGRvYy5jcmVhdGVFdmVudE9iamVjdCgpO1xuICAgIH1cbiAgICByZXR1cm4gZTtcbiAgfVxuICBmdW5jdGlvbiBtYWtlQ3VzdG9tRXZlbnQgKCkge1xuICAgIHJldHVybiBuZXcgY3VzdG9tRXZlbnQodHlwZSwgeyBkZXRhaWw6IG1vZGVsIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIHdyYXBwZXJGYWN0b3J5IChlbCwgdHlwZSwgZm4pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHdyYXBwZXIgKG9yaWdpbmFsRXZlbnQpIHtcbiAgICB2YXIgZSA9IG9yaWdpbmFsRXZlbnQgfHwgZ2xvYmFsLmV2ZW50O1xuICAgIGUudGFyZ2V0ID0gZS50YXJnZXQgfHwgZS5zcmNFbGVtZW50O1xuICAgIGUucHJldmVudERlZmF1bHQgPSBlLnByZXZlbnREZWZhdWx0IHx8IGZ1bmN0aW9uIHByZXZlbnREZWZhdWx0ICgpIHsgZS5yZXR1cm5WYWx1ZSA9IGZhbHNlOyB9O1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uID0gZS5zdG9wUHJvcGFnYXRpb24gfHwgZnVuY3Rpb24gc3RvcFByb3BhZ2F0aW9uICgpIHsgZS5jYW5jZWxCdWJibGUgPSB0cnVlOyB9O1xuICAgIGUud2hpY2ggPSBlLndoaWNoIHx8IGUua2V5Q29kZTtcbiAgICBmbi5jYWxsKGVsLCBlKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gd3JhcCAoZWwsIHR5cGUsIGZuKSB7XG4gIHZhciB3cmFwcGVyID0gdW53cmFwKGVsLCB0eXBlLCBmbikgfHwgd3JhcHBlckZhY3RvcnkoZWwsIHR5cGUsIGZuKTtcbiAgaGFyZENhY2hlLnB1c2goe1xuICAgIHdyYXBwZXI6IHdyYXBwZXIsXG4gICAgZWxlbWVudDogZWwsXG4gICAgdHlwZTogdHlwZSxcbiAgICBmbjogZm5cbiAgfSk7XG4gIHJldHVybiB3cmFwcGVyO1xufVxuXG5mdW5jdGlvbiB1bndyYXAgKGVsLCB0eXBlLCBmbikge1xuICB2YXIgaSA9IGZpbmQoZWwsIHR5cGUsIGZuKTtcbiAgaWYgKGkpIHtcbiAgICB2YXIgd3JhcHBlciA9IGhhcmRDYWNoZVtpXS53cmFwcGVyO1xuICAgIGhhcmRDYWNoZS5zcGxpY2UoaSwgMSk7IC8vIGZyZWUgdXAgYSB0YWQgb2YgbWVtb3J5XG4gICAgcmV0dXJuIHdyYXBwZXI7XG4gIH1cbn1cblxuZnVuY3Rpb24gZmluZCAoZWwsIHR5cGUsIGZuKSB7XG4gIHZhciBpLCBpdGVtO1xuICBmb3IgKGkgPSAwOyBpIDwgaGFyZENhY2hlLmxlbmd0aDsgaSsrKSB7XG4gICAgaXRlbSA9IGhhcmRDYWNoZVtpXTtcbiAgICBpZiAoaXRlbS5lbGVtZW50ID09PSBlbCAmJiBpdGVtLnR5cGUgPT09IHR5cGUgJiYgaXRlbS5mbiA9PT0gZm4pIHtcbiAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgYWRkOiBhZGRFdmVudCxcbiAgcmVtb3ZlOiByZW1vdmVFdmVudCxcbiAgZmFicmljYXRlOiBmYWJyaWNhdGVFdmVudFxufTtcbiJdfQ==\n},{\"./eventmap\":4,\"custom-event\":2}],4:[function(require,module,exports){\n(function (global){\n'use strict';\n\nvar eventmap = [];\nvar eventname = '';\nvar ron = /^on/;\n\nfor (eventname in global) {\n  if (ron.test(eventname)) {\n    eventmap.push(eventname.slice(2));\n  }\n}\n\nmodule.exports = eventmap;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9jcm9zc3ZlbnQvc3JjL2V2ZW50bWFwLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBldmVudG1hcCA9IFtdO1xudmFyIGV2ZW50bmFtZSA9ICcnO1xudmFyIHJvbiA9IC9eb24vO1xuXG5mb3IgKGV2ZW50bmFtZSBpbiBnbG9iYWwpIHtcbiAgaWYgKHJvbi50ZXN0KGV2ZW50bmFtZSkpIHtcbiAgICBldmVudG1hcC5wdXNoKGV2ZW50bmFtZS5zbGljZSgyKSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBldmVudG1hcDtcbiJdfQ==\n},{}],5:[function(require,module,exports){\n(function (global){\n'use strict';\n\nvar getSelection;\nvar doc = global.document;\nvar getSelectionRaw = require('./getSelectionRaw');\nvar getSelectionNullOp = require('./getSelectionNullOp');\nvar getSelectionSynthetic = require('./getSelectionSynthetic');\nvar isHost = require('./isHost');\nif (isHost.method(global, 'getSelection')) {\n  getSelection = getSelectionRaw;\n} else if (typeof doc.selection === 'object' && doc.selection) {\n  getSelection = getSelectionSynthetic;\n} else {\n  getSelection = getSelectionNullOp;\n}\n\nmodule.exports = getSelection;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9zZWxlY2Npb24vc3JjL2dldFNlbGVjdGlvbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBnZXRTZWxlY3Rpb247XG52YXIgZG9jID0gZ2xvYmFsLmRvY3VtZW50O1xudmFyIGdldFNlbGVjdGlvblJhdyA9IHJlcXVpcmUoJy4vZ2V0U2VsZWN0aW9uUmF3Jyk7XG52YXIgZ2V0U2VsZWN0aW9uTnVsbE9wID0gcmVxdWlyZSgnLi9nZXRTZWxlY3Rpb25OdWxsT3AnKTtcbnZhciBnZXRTZWxlY3Rpb25TeW50aGV0aWMgPSByZXF1aXJlKCcuL2dldFNlbGVjdGlvblN5bnRoZXRpYycpO1xudmFyIGlzSG9zdCA9IHJlcXVpcmUoJy4vaXNIb3N0Jyk7XG5pZiAoaXNIb3N0Lm1ldGhvZChnbG9iYWwsICdnZXRTZWxlY3Rpb24nKSkge1xuICBnZXRTZWxlY3Rpb24gPSBnZXRTZWxlY3Rpb25SYXc7XG59IGVsc2UgaWYgKHR5cGVvZiBkb2Muc2VsZWN0aW9uID09PSAnb2JqZWN0JyAmJiBkb2Muc2VsZWN0aW9uKSB7XG4gIGdldFNlbGVjdGlvbiA9IGdldFNlbGVjdGlvblN5bnRoZXRpYztcbn0gZWxzZSB7XG4gIGdldFNlbGVjdGlvbiA9IGdldFNlbGVjdGlvbk51bGxPcDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRTZWxlY3Rpb247XG4iXX0=\n},{\"./getSelectionNullOp\":6,\"./getSelectionRaw\":7,\"./getSelectionSynthetic\":8,\"./isHost\":9}],6:[function(require,module,exports){\n'use strict';\n\nfunction noop () {}\n\nfunction getSelectionNullOp () {\n  return {\n    removeAllRanges: noop,\n    addRange: noop\n  };\n}\n\nmodule.exports = getSelectionNullOp;\n\n},{}],7:[function(require,module,exports){\n(function (global){\n'use strict';\n\nfunction getSelectionRaw () {\n  return global.getSelection();\n}\n\nmodule.exports = getSelectionRaw;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9zZWxlY2Npb24vc3JjL2dldFNlbGVjdGlvblJhdy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBnZXRTZWxlY3Rpb25SYXcgKCkge1xuICByZXR1cm4gZ2xvYmFsLmdldFNlbGVjdGlvbigpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdldFNlbGVjdGlvblJhdztcbiJdfQ==\n},{}],8:[function(require,module,exports){\n(function (global){\n'use strict';\n\nvar rangeToTextRange = require('./rangeToTextRange');\nvar doc = global.document;\nvar body = doc.body;\nvar GetSelectionProto = GetSelection.prototype;\n\nfunction GetSelection (selection) {\n  var self = this;\n  var range = selection.createRange();\n\n  this._selection = selection;\n  this._ranges = [];\n\n  if (selection.type === 'Control') {\n    updateControlSelection(self);\n  } else if (isTextRange(range)) {\n    updateFromTextRange(self, range);\n  } else {\n    updateEmptySelection(self);\n  }\n}\n\nGetSelectionProto.removeAllRanges = function () {\n  var textRange;\n  try {\n    this._selection.empty();\n    if (this._selection.type !== 'None') {\n      textRange = body.createTextRange();\n      textRange.select();\n      this._selection.empty();\n    }\n  } catch (e) {\n  }\n  updateEmptySelection(this);\n};\n\nGetSelectionProto.addRange = function (range) {\n  if (this._selection.type === 'Control') {\n    addRangeToControlSelection(this, range);\n  } else {\n    rangeToTextRange(range).select();\n    this._ranges[0] = range;\n    this.rangeCount = 1;\n    this.isCollapsed = this._ranges[0].collapsed;\n    updateAnchorAndFocusFromRange(this, range, false);\n  }\n};\n\nGetSelectionProto.setRanges = function (ranges) {\n  this.removeAllRanges();\n  var rangeCount = ranges.length;\n  if (rangeCount > 1) {\n    createControlSelection(this, ranges);\n  } else if (rangeCount) {\n    this.addRange(ranges[0]);\n  }\n};\n\nGetSelectionProto.getRangeAt = function (index) {\n  if (index < 0 || index >= this.rangeCount) {\n    throw new Error('getRangeAt(): index out of bounds');\n  } else {\n    return this._ranges[index].cloneRange();\n  }\n};\n\nGetSelectionProto.removeRange = function (range) {\n  if (this._selection.type !== 'Control') {\n    removeRangeManually(this, range);\n    return;\n  }\n  var controlRange = this._selection.createRange();\n  var rangeElement = getSingleElementFromRange(range);\n  var newControlRange = body.createControlRange();\n  var el;\n  var removed = false;\n  for (var i = 0, len = controlRange.length; i < len; ++i) {\n    el = controlRange.item(i);\n    if (el !== rangeElement || removed) {\n      newControlRange.add(controlRange.item(i));\n    } else {\n      removed = true;\n    }\n  }\n  newControlRange.select();\n  updateControlSelection(this);\n};\n\nGetSelectionProto.eachRange = function (fn, returnValue) {\n  var i = 0;\n  var len = this._ranges.length;\n  for (i = 0; i < len; ++i) {\n    if (fn(this.getRangeAt(i))) {\n      return returnValue;\n    }\n  }\n};\n\nGetSelectionProto.getAllRanges = function () {\n  var ranges = [];\n  this.eachRange(function (range) {\n    ranges.push(range);\n  });\n  return ranges;\n};\n\nGetSelectionProto.setSingleRange = function (range) {\n  this.removeAllRanges();\n  this.addRange(range);\n};\n\nfunction createControlSelection (sel, ranges) {\n  var controlRange = body.createControlRange();\n  for (var i = 0, el, len = ranges.length; i < len; ++i) {\n    el = getSingleElementFromRange(ranges[i]);\n    try {\n      controlRange.add(el);\n    } catch (e) {\n      throw new Error('setRanges(): Element could not be added to control selection');\n    }\n  }\n  controlRange.select();\n  updateControlSelection(sel);\n}\n\nfunction removeRangeManually (sel, range) {\n  var ranges = sel.getAllRanges();\n  sel.removeAllRanges();\n  for (var i = 0, len = ranges.length; i < len; ++i) {\n    if (!isSameRange(range, ranges[i])) {\n      sel.addRange(ranges[i]);\n    }\n  }\n  if (!sel.rangeCount) {\n    updateEmptySelection(sel);\n  }\n}\n\nfunction updateAnchorAndFocusFromRange (sel, range) {\n  var anchorPrefix = 'start';\n  var focusPrefix = 'end';\n  sel.anchorNode = range[anchorPrefix + 'Container'];\n  sel.anchorOffset = range[anchorPrefix + 'Offset'];\n  sel.focusNode = range[focusPrefix + 'Container'];\n  sel.focusOffset = range[focusPrefix + 'Offset'];\n}\n\nfunction updateEmptySelection (sel) {\n  sel.anchorNode = sel.focusNode = null;\n  sel.anchorOffset = sel.focusOffset = 0;\n  sel.rangeCount = 0;\n  sel.isCollapsed = true;\n  sel._ranges.length = 0;\n}\n\nfunction rangeContainsSingleElement (rangeNodes) {\n  if (!rangeNodes.length || rangeNodes[0].nodeType !== 1) {\n    return false;\n  }\n  for (var i = 1, len = rangeNodes.length; i < len; ++i) {\n    if (!isAncestorOf(rangeNodes[0], rangeNodes[i])) {\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction getSingleElementFromRange (range) {\n  var nodes = range.getNodes();\n  if (!rangeContainsSingleElement(nodes)) {\n    throw new Error('getSingleElementFromRange(): range did not consist of a single element');\n  }\n  return nodes[0];\n}\n\nfunction isTextRange (range) {\n  return range && range.text !== void 0;\n}\n\nfunction updateFromTextRange (sel, range) {\n  sel._ranges = [range];\n  updateAnchorAndFocusFromRange(sel, range, false);\n  sel.rangeCount = 1;\n  sel.isCollapsed = range.collapsed;\n}\n\nfunction updateControlSelection (sel) {\n  sel._ranges.length = 0;\n  if (sel._selection.type === 'None') {\n    updateEmptySelection(sel);\n  } else {\n    var controlRange = sel._selection.createRange();\n    if (isTextRange(controlRange)) {\n      updateFromTextRange(sel, controlRange);\n    } else {\n      sel.rangeCount = controlRange.length;\n      var range;\n      for (var i = 0; i < sel.rangeCount; ++i) {\n        range = doc.createRange();\n        range.selectNode(controlRange.item(i));\n        sel._ranges.push(range);\n      }\n      sel.isCollapsed = sel.rangeCount === 1 && sel._ranges[0].collapsed;\n      updateAnchorAndFocusFromRange(sel, sel._ranges[sel.rangeCount - 1], false);\n    }\n  }\n}\n\nfunction addRangeToControlSelection (sel, range) {\n  var controlRange = sel._selection.createRange();\n  var rangeElement = getSingleElementFromRange(range);\n  var newControlRange = body.createControlRange();\n  for (var i = 0, len = controlRange.length; i < len; ++i) {\n    newControlRange.add(controlRange.item(i));\n  }\n  try {\n    newControlRange.add(rangeElement);\n  } catch (e) {\n    throw new Error('addRange(): Element could not be added to control selection');\n  }\n  newControlRange.select();\n  updateControlSelection(sel);\n}\n\nfunction isSameRange (left, right) {\n  return (\n    left.startContainer === right.startContainer &&\n    left.startOffset === right.startOffset &&\n    left.endContainer === right.endContainer &&\n    left.endOffset === right.endOffset\n  );\n}\n\nfunction isAncestorOf (ancestor, descendant) {\n  var node = descendant;\n  while (node.parentNode) {\n    if (node.parentNode === ancestor) {\n      return true;\n    }\n    node = node.parentNode;\n  }\n  return false;\n}\n\nfunction getSelection () {\n  return new GetSelection(global.document.selection);\n}\n\nmodule.exports = getSelection;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9zZWxlY2Npb24vc3JjL2dldFNlbGVjdGlvblN5bnRoZXRpYy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgcmFuZ2VUb1RleHRSYW5nZSA9IHJlcXVpcmUoJy4vcmFuZ2VUb1RleHRSYW5nZScpO1xudmFyIGRvYyA9IGdsb2JhbC5kb2N1bWVudDtcbnZhciBib2R5ID0gZG9jLmJvZHk7XG52YXIgR2V0U2VsZWN0aW9uUHJvdG8gPSBHZXRTZWxlY3Rpb24ucHJvdG90eXBlO1xuXG5mdW5jdGlvbiBHZXRTZWxlY3Rpb24gKHNlbGVjdGlvbikge1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciByYW5nZSA9IHNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpO1xuXG4gIHRoaXMuX3NlbGVjdGlvbiA9IHNlbGVjdGlvbjtcbiAgdGhpcy5fcmFuZ2VzID0gW107XG5cbiAgaWYgKHNlbGVjdGlvbi50eXBlID09PSAnQ29udHJvbCcpIHtcbiAgICB1cGRhdGVDb250cm9sU2VsZWN0aW9uKHNlbGYpO1xuICB9IGVsc2UgaWYgKGlzVGV4dFJhbmdlKHJhbmdlKSkge1xuICAgIHVwZGF0ZUZyb21UZXh0UmFuZ2Uoc2VsZiwgcmFuZ2UpO1xuICB9IGVsc2Uge1xuICAgIHVwZGF0ZUVtcHR5U2VsZWN0aW9uKHNlbGYpO1xuICB9XG59XG5cbkdldFNlbGVjdGlvblByb3RvLnJlbW92ZUFsbFJhbmdlcyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHRleHRSYW5nZTtcbiAgdHJ5IHtcbiAgICB0aGlzLl9zZWxlY3Rpb24uZW1wdHkoKTtcbiAgICBpZiAodGhpcy5fc2VsZWN0aW9uLnR5cGUgIT09ICdOb25lJykge1xuICAgICAgdGV4dFJhbmdlID0gYm9keS5jcmVhdGVUZXh0UmFuZ2UoKTtcbiAgICAgIHRleHRSYW5nZS5zZWxlY3QoKTtcbiAgICAgIHRoaXMuX3NlbGVjdGlvbi5lbXB0eSgpO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICB9XG4gIHVwZGF0ZUVtcHR5U2VsZWN0aW9uKHRoaXMpO1xufTtcblxuR2V0U2VsZWN0aW9uUHJvdG8uYWRkUmFuZ2UgPSBmdW5jdGlvbiAocmFuZ2UpIHtcbiAgaWYgKHRoaXMuX3NlbGVjdGlvbi50eXBlID09PSAnQ29udHJvbCcpIHtcbiAgICBhZGRSYW5nZVRvQ29udHJvbFNlbGVjdGlvbih0aGlzLCByYW5nZSk7XG4gIH0gZWxzZSB7XG4gICAgcmFuZ2VUb1RleHRSYW5nZShyYW5nZSkuc2VsZWN0KCk7XG4gICAgdGhpcy5fcmFuZ2VzWzBdID0gcmFuZ2U7XG4gICAgdGhpcy5yYW5nZUNvdW50ID0gMTtcbiAgICB0aGlzLmlzQ29sbGFwc2VkID0gdGhpcy5fcmFuZ2VzWzBdLmNvbGxhcHNlZDtcbiAgICB1cGRhdGVBbmNob3JBbmRGb2N1c0Zyb21SYW5nZSh0aGlzLCByYW5nZSwgZmFsc2UpO1xuICB9XG59O1xuXG5HZXRTZWxlY3Rpb25Qcm90by5zZXRSYW5nZXMgPSBmdW5jdGlvbiAocmFuZ2VzKSB7XG4gIHRoaXMucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gIHZhciByYW5nZUNvdW50ID0gcmFuZ2VzLmxlbmd0aDtcbiAgaWYgKHJhbmdlQ291bnQgPiAxKSB7XG4gICAgY3JlYXRlQ29udHJvbFNlbGVjdGlvbih0aGlzLCByYW5nZXMpO1xuICB9IGVsc2UgaWYgKHJhbmdlQ291bnQpIHtcbiAgICB0aGlzLmFkZFJhbmdlKHJhbmdlc1swXSk7XG4gIH1cbn07XG5cbkdldFNlbGVjdGlvblByb3RvLmdldFJhbmdlQXQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgaWYgKGluZGV4IDwgMCB8fCBpbmRleCA+PSB0aGlzLnJhbmdlQ291bnQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2dldFJhbmdlQXQoKTogaW5kZXggb3V0IG9mIGJvdW5kcycpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB0aGlzLl9yYW5nZXNbaW5kZXhdLmNsb25lUmFuZ2UoKTtcbiAgfVxufTtcblxuR2V0U2VsZWN0aW9uUHJvdG8ucmVtb3ZlUmFuZ2UgPSBmdW5jdGlvbiAocmFuZ2UpIHtcbiAgaWYgKHRoaXMuX3NlbGVjdGlvbi50eXBlICE9PSAnQ29udHJvbCcpIHtcbiAgICByZW1vdmVSYW5nZU1hbnVhbGx5KHRoaXMsIHJhbmdlKTtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIGNvbnRyb2xSYW5nZSA9IHRoaXMuX3NlbGVjdGlvbi5jcmVhdGVSYW5nZSgpO1xuICB2YXIgcmFuZ2VFbGVtZW50ID0gZ2V0U2luZ2xlRWxlbWVudEZyb21SYW5nZShyYW5nZSk7XG4gIHZhciBuZXdDb250cm9sUmFuZ2UgPSBib2R5LmNyZWF0ZUNvbnRyb2xSYW5nZSgpO1xuICB2YXIgZWw7XG4gIHZhciByZW1vdmVkID0gZmFsc2U7XG4gIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb250cm9sUmFuZ2UubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgICBlbCA9IGNvbnRyb2xSYW5nZS5pdGVtKGkpO1xuICAgIGlmIChlbCAhPT0gcmFuZ2VFbGVtZW50IHx8IHJlbW92ZWQpIHtcbiAgICAgIG5ld0NvbnRyb2xSYW5nZS5hZGQoY29udHJvbFJhbmdlLml0ZW0oaSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZW1vdmVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgbmV3Q29udHJvbFJhbmdlLnNlbGVjdCgpO1xuICB1cGRhdGVDb250cm9sU2VsZWN0aW9uKHRoaXMpO1xufTtcblxuR2V0U2VsZWN0aW9uUHJvdG8uZWFjaFJhbmdlID0gZnVuY3Rpb24gKGZuLCByZXR1cm5WYWx1ZSkge1xuICB2YXIgaSA9IDA7XG4gIHZhciBsZW4gPSB0aGlzLl9yYW5nZXMubGVuZ3RoO1xuICBmb3IgKGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICBpZiAoZm4odGhpcy5nZXRSYW5nZUF0KGkpKSkge1xuICAgICAgcmV0dXJuIHJldHVyblZhbHVlO1xuICAgIH1cbiAgfVxufTtcblxuR2V0U2VsZWN0aW9uUHJvdG8uZ2V0QWxsUmFuZ2VzID0gZnVuY3Rpb24gKCkge1xuICB2YXIgcmFuZ2VzID0gW107XG4gIHRoaXMuZWFjaFJhbmdlKGZ1bmN0aW9uIChyYW5nZSkge1xuICAgIHJhbmdlcy5wdXNoKHJhbmdlKTtcbiAgfSk7XG4gIHJldHVybiByYW5nZXM7XG59O1xuXG5HZXRTZWxlY3Rpb25Qcm90by5zZXRTaW5nbGVSYW5nZSA9IGZ1bmN0aW9uIChyYW5nZSkge1xuICB0aGlzLnJlbW92ZUFsbFJhbmdlcygpO1xuICB0aGlzLmFkZFJhbmdlKHJhbmdlKTtcbn07XG5cbmZ1bmN0aW9uIGNyZWF0ZUNvbnRyb2xTZWxlY3Rpb24gKHNlbCwgcmFuZ2VzKSB7XG4gIHZhciBjb250cm9sUmFuZ2UgPSBib2R5LmNyZWF0ZUNvbnRyb2xSYW5nZSgpO1xuICBmb3IgKHZhciBpID0gMCwgZWwsIGxlbiA9IHJhbmdlcy5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuICAgIGVsID0gZ2V0U2luZ2xlRWxlbWVudEZyb21SYW5nZShyYW5nZXNbaV0pO1xuICAgIHRyeSB7XG4gICAgICBjb250cm9sUmFuZ2UuYWRkKGVsKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFJhbmdlcygpOiBFbGVtZW50IGNvdWxkIG5vdCBiZSBhZGRlZCB0byBjb250cm9sIHNlbGVjdGlvbicpO1xuICAgIH1cbiAgfVxuICBjb250cm9sUmFuZ2Uuc2VsZWN0KCk7XG4gIHVwZGF0ZUNvbnRyb2xTZWxlY3Rpb24oc2VsKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlUmFuZ2VNYW51YWxseSAoc2VsLCByYW5nZSkge1xuICB2YXIgcmFuZ2VzID0gc2VsLmdldEFsbFJhbmdlcygpO1xuICBzZWwucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gIGZvciAodmFyIGkgPSAwLCBsZW4gPSByYW5nZXMubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgICBpZiAoIWlzU2FtZVJhbmdlKHJhbmdlLCByYW5nZXNbaV0pKSB7XG4gICAgICBzZWwuYWRkUmFuZ2UocmFuZ2VzW2ldKTtcbiAgICB9XG4gIH1cbiAgaWYgKCFzZWwucmFuZ2VDb3VudCkge1xuICAgIHVwZGF0ZUVtcHR5U2VsZWN0aW9uKHNlbCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gdXBkYXRlQW5jaG9yQW5kRm9jdXNGcm9tUmFuZ2UgKHNlbCwgcmFuZ2UpIHtcbiAgdmFyIGFuY2hvclByZWZpeCA9ICdzdGFydCc7XG4gIHZhciBmb2N1c1ByZWZpeCA9ICdlbmQnO1xuICBzZWwuYW5jaG9yTm9kZSA9IHJhbmdlW2FuY2hvclByZWZpeCArICdDb250YWluZXInXTtcbiAgc2VsLmFuY2hvck9mZnNldCA9IHJhbmdlW2FuY2hvclByZWZpeCArICdPZmZzZXQnXTtcbiAgc2VsLmZvY3VzTm9kZSA9IHJhbmdlW2ZvY3VzUHJlZml4ICsgJ0NvbnRhaW5lciddO1xuICBzZWwuZm9jdXNPZmZzZXQgPSByYW5nZVtmb2N1c1ByZWZpeCArICdPZmZzZXQnXTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlRW1wdHlTZWxlY3Rpb24gKHNlbCkge1xuICBzZWwuYW5jaG9yTm9kZSA9IHNlbC5mb2N1c05vZGUgPSBudWxsO1xuICBzZWwuYW5jaG9yT2Zmc2V0ID0gc2VsLmZvY3VzT2Zmc2V0ID0gMDtcbiAgc2VsLnJhbmdlQ291bnQgPSAwO1xuICBzZWwuaXNDb2xsYXBzZWQgPSB0cnVlO1xuICBzZWwuX3Jhbmdlcy5sZW5ndGggPSAwO1xufVxuXG5mdW5jdGlvbiByYW5nZUNvbnRhaW5zU2luZ2xlRWxlbWVudCAocmFuZ2VOb2Rlcykge1xuICBpZiAoIXJhbmdlTm9kZXMubGVuZ3RoIHx8IHJhbmdlTm9kZXNbMF0ubm9kZVR5cGUgIT09IDEpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgZm9yICh2YXIgaSA9IDEsIGxlbiA9IHJhbmdlTm9kZXMubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgICBpZiAoIWlzQW5jZXN0b3JPZihyYW5nZU5vZGVzWzBdLCByYW5nZU5vZGVzW2ldKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gZ2V0U2luZ2xlRWxlbWVudEZyb21SYW5nZSAocmFuZ2UpIHtcbiAgdmFyIG5vZGVzID0gcmFuZ2UuZ2V0Tm9kZXMoKTtcbiAgaWYgKCFyYW5nZUNvbnRhaW5zU2luZ2xlRWxlbWVudChub2RlcykpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2dldFNpbmdsZUVsZW1lbnRGcm9tUmFuZ2UoKTogcmFuZ2UgZGlkIG5vdCBjb25zaXN0IG9mIGEgc2luZ2xlIGVsZW1lbnQnKTtcbiAgfVxuICByZXR1cm4gbm9kZXNbMF07XG59XG5cbmZ1bmN0aW9uIGlzVGV4dFJhbmdlIChyYW5nZSkge1xuICByZXR1cm4gcmFuZ2UgJiYgcmFuZ2UudGV4dCAhPT0gdm9pZCAwO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVGcm9tVGV4dFJhbmdlIChzZWwsIHJhbmdlKSB7XG4gIHNlbC5fcmFuZ2VzID0gW3JhbmdlXTtcbiAgdXBkYXRlQW5jaG9yQW5kRm9jdXNGcm9tUmFuZ2Uoc2VsLCByYW5nZSwgZmFsc2UpO1xuICBzZWwucmFuZ2VDb3VudCA9IDE7XG4gIHNlbC5pc0NvbGxhcHNlZCA9IHJhbmdlLmNvbGxhcHNlZDtcbn1cblxuZnVuY3Rpb24gdXBkYXRlQ29udHJvbFNlbGVjdGlvbiAoc2VsKSB7XG4gIHNlbC5fcmFuZ2VzLmxlbmd0aCA9IDA7XG4gIGlmIChzZWwuX3NlbGVjdGlvbi50eXBlID09PSAnTm9uZScpIHtcbiAgICB1cGRhdGVFbXB0eVNlbGVjdGlvbihzZWwpO1xuICB9IGVsc2Uge1xuICAgIHZhciBjb250cm9sUmFuZ2UgPSBzZWwuX3NlbGVjdGlvbi5jcmVhdGVSYW5nZSgpO1xuICAgIGlmIChpc1RleHRSYW5nZShjb250cm9sUmFuZ2UpKSB7XG4gICAgICB1cGRhdGVGcm9tVGV4dFJhbmdlKHNlbCwgY29udHJvbFJhbmdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2VsLnJhbmdlQ291bnQgPSBjb250cm9sUmFuZ2UubGVuZ3RoO1xuICAgICAgdmFyIHJhbmdlO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWwucmFuZ2VDb3VudDsgKytpKSB7XG4gICAgICAgIHJhbmdlID0gZG9jLmNyZWF0ZVJhbmdlKCk7XG4gICAgICAgIHJhbmdlLnNlbGVjdE5vZGUoY29udHJvbFJhbmdlLml0ZW0oaSkpO1xuICAgICAgICBzZWwuX3Jhbmdlcy5wdXNoKHJhbmdlKTtcbiAgICAgIH1cbiAgICAgIHNlbC5pc0NvbGxhcHNlZCA9IHNlbC5yYW5nZUNvdW50ID09PSAxICYmIHNlbC5fcmFuZ2VzWzBdLmNvbGxhcHNlZDtcbiAgICAgIHVwZGF0ZUFuY2hvckFuZEZvY3VzRnJvbVJhbmdlKHNlbCwgc2VsLl9yYW5nZXNbc2VsLnJhbmdlQ291bnQgLSAxXSwgZmFsc2UpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBhZGRSYW5nZVRvQ29udHJvbFNlbGVjdGlvbiAoc2VsLCByYW5nZSkge1xuICB2YXIgY29udHJvbFJhbmdlID0gc2VsLl9zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKTtcbiAgdmFyIHJhbmdlRWxlbWVudCA9IGdldFNpbmdsZUVsZW1lbnRGcm9tUmFuZ2UocmFuZ2UpO1xuICB2YXIgbmV3Q29udHJvbFJhbmdlID0gYm9keS5jcmVhdGVDb250cm9sUmFuZ2UoKTtcbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvbnRyb2xSYW5nZS5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuICAgIG5ld0NvbnRyb2xSYW5nZS5hZGQoY29udHJvbFJhbmdlLml0ZW0oaSkpO1xuICB9XG4gIHRyeSB7XG4gICAgbmV3Q29udHJvbFJhbmdlLmFkZChyYW5nZUVsZW1lbnQpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdhZGRSYW5nZSgpOiBFbGVtZW50IGNvdWxkIG5vdCBiZSBhZGRlZCB0byBjb250cm9sIHNlbGVjdGlvbicpO1xuICB9XG4gIG5ld0NvbnRyb2xSYW5nZS5zZWxlY3QoKTtcbiAgdXBkYXRlQ29udHJvbFNlbGVjdGlvbihzZWwpO1xufVxuXG5mdW5jdGlvbiBpc1NhbWVSYW5nZSAobGVmdCwgcmlnaHQpIHtcbiAgcmV0dXJuIChcbiAgICBsZWZ0LnN0YXJ0Q29udGFpbmVyID09PSByaWdodC5zdGFydENvbnRhaW5lciAmJlxuICAgIGxlZnQuc3RhcnRPZmZzZXQgPT09IHJpZ2h0LnN0YXJ0T2Zmc2V0ICYmXG4gICAgbGVmdC5lbmRDb250YWluZXIgPT09IHJpZ2h0LmVuZENvbnRhaW5lciAmJlxuICAgIGxlZnQuZW5kT2Zmc2V0ID09PSByaWdodC5lbmRPZmZzZXRcbiAgKTtcbn1cblxuZnVuY3Rpb24gaXNBbmNlc3Rvck9mIChhbmNlc3RvciwgZGVzY2VuZGFudCkge1xuICB2YXIgbm9kZSA9IGRlc2NlbmRhbnQ7XG4gIHdoaWxlIChub2RlLnBhcmVudE5vZGUpIHtcbiAgICBpZiAobm9kZS5wYXJlbnROb2RlID09PSBhbmNlc3Rvcikge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBnZXRTZWxlY3Rpb24gKCkge1xuICByZXR1cm4gbmV3IEdldFNlbGVjdGlvbihnbG9iYWwuZG9jdW1lbnQuc2VsZWN0aW9uKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRTZWxlY3Rpb247XG4iXX0=\n},{\"./rangeToTextRange\":10}],9:[function(require,module,exports){\n'use strict';\n\nfunction isHostMethod (host, prop) {\n  var type = typeof host[prop];\n  return type === 'function' || !!(type === 'object' && host[prop]) || type === 'unknown';\n}\n\nfunction isHostProperty (host, prop) {\n  return typeof host[prop] !== 'undefined';\n}\n\nfunction many (fn) {\n  return function areHosted (host, props) {\n    var i = props.length;\n    while (i--) {\n      if (!fn(host, props[i])) {\n        return false;\n      }\n    }\n    return true;\n  };\n}\n\nmodule.exports = {\n  method: isHostMethod,\n  methods: many(isHostMethod),\n  property: isHostProperty,\n  properties: many(isHostProperty)\n};\n\n},{}],10:[function(require,module,exports){\n(function (global){\n'use strict';\n\nvar doc = global.document;\nvar body = doc.body;\n\nfunction rangeToTextRange (p) {\n  if (p.collapsed) {\n    return createBoundaryTextRange({ node: p.startContainer, offset: p.startOffset }, true);\n  }\n  var startRange = createBoundaryTextRange({ node: p.startContainer, offset: p.startOffset }, true);\n  var endRange = createBoundaryTextRange({ node: p.endContainer, offset: p.endOffset }, false);\n  var textRange = body.createTextRange();\n  textRange.setEndPoint('StartToStart', startRange);\n  textRange.setEndPoint('EndToEnd', endRange);\n  return textRange;\n}\n\nfunction isCharacterDataNode (node) {\n  var t = node.nodeType;\n  return t === 3 || t === 4 || t === 8 ;\n}\n\nfunction createBoundaryTextRange (p, starting) {\n  var bound;\n  var parent;\n  var offset = p.offset;\n  var workingNode;\n  var childNodes;\n  var range = body.createTextRange();\n  var data = isCharacterDataNode(p.node);\n\n  if (data) {\n    bound = p.node;\n    parent = bound.parentNode;\n  } else {\n    childNodes = p.node.childNodes;\n    bound = offset < childNodes.length ? childNodes[offset] : null;\n    parent = p.node;\n  }\n\n  workingNode = doc.createElement('span');\n  workingNode.innerHTML = '&#feff;';\n\n  if (bound) {\n    parent.insertBefore(workingNode, bound);\n  } else {\n    parent.appendChild(workingNode);\n  }\n\n  range.moveToElementText(workingNode);\n  range.collapse(!starting);\n  parent.removeChild(workingNode);\n\n  if (data) {\n    range[starting ? 'moveStart' : 'moveEnd']('character', offset);\n  }\n  return range;\n}\n\nmodule.exports = rangeToTextRange;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9zZWxlY2Npb24vc3JjL3JhbmdlVG9UZXh0UmFuZ2UuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBkb2MgPSBnbG9iYWwuZG9jdW1lbnQ7XG52YXIgYm9keSA9IGRvYy5ib2R5O1xuXG5mdW5jdGlvbiByYW5nZVRvVGV4dFJhbmdlIChwKSB7XG4gIGlmIChwLmNvbGxhcHNlZCkge1xuICAgIHJldHVybiBjcmVhdGVCb3VuZGFyeVRleHRSYW5nZSh7IG5vZGU6IHAuc3RhcnRDb250YWluZXIsIG9mZnNldDogcC5zdGFydE9mZnNldCB9LCB0cnVlKTtcbiAgfVxuICB2YXIgc3RhcnRSYW5nZSA9IGNyZWF0ZUJvdW5kYXJ5VGV4dFJhbmdlKHsgbm9kZTogcC5zdGFydENvbnRhaW5lciwgb2Zmc2V0OiBwLnN0YXJ0T2Zmc2V0IH0sIHRydWUpO1xuICB2YXIgZW5kUmFuZ2UgPSBjcmVhdGVCb3VuZGFyeVRleHRSYW5nZSh7IG5vZGU6IHAuZW5kQ29udGFpbmVyLCBvZmZzZXQ6IHAuZW5kT2Zmc2V0IH0sIGZhbHNlKTtcbiAgdmFyIHRleHRSYW5nZSA9IGJvZHkuY3JlYXRlVGV4dFJhbmdlKCk7XG4gIHRleHRSYW5nZS5zZXRFbmRQb2ludCgnU3RhcnRUb1N0YXJ0Jywgc3RhcnRSYW5nZSk7XG4gIHRleHRSYW5nZS5zZXRFbmRQb2ludCgnRW5kVG9FbmQnLCBlbmRSYW5nZSk7XG4gIHJldHVybiB0ZXh0UmFuZ2U7XG59XG5cbmZ1bmN0aW9uIGlzQ2hhcmFjdGVyRGF0YU5vZGUgKG5vZGUpIHtcbiAgdmFyIHQgPSBub2RlLm5vZGVUeXBlO1xuICByZXR1cm4gdCA9PT0gMyB8fCB0ID09PSA0IHx8IHQgPT09IDggO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVCb3VuZGFyeVRleHRSYW5nZSAocCwgc3RhcnRpbmcpIHtcbiAgdmFyIGJvdW5kO1xuICB2YXIgcGFyZW50O1xuICB2YXIgb2Zmc2V0ID0gcC5vZmZzZXQ7XG4gIHZhciB3b3JraW5nTm9kZTtcbiAgdmFyIGNoaWxkTm9kZXM7XG4gIHZhciByYW5nZSA9IGJvZHkuY3JlYXRlVGV4dFJhbmdlKCk7XG4gIHZhciBkYXRhID0gaXNDaGFyYWN0ZXJEYXRhTm9kZShwLm5vZGUpO1xuXG4gIGlmIChkYXRhKSB7XG4gICAgYm91bmQgPSBwLm5vZGU7XG4gICAgcGFyZW50ID0gYm91bmQucGFyZW50Tm9kZTtcbiAgfSBlbHNlIHtcbiAgICBjaGlsZE5vZGVzID0gcC5ub2RlLmNoaWxkTm9kZXM7XG4gICAgYm91bmQgPSBvZmZzZXQgPCBjaGlsZE5vZGVzLmxlbmd0aCA/IGNoaWxkTm9kZXNbb2Zmc2V0XSA6IG51bGw7XG4gICAgcGFyZW50ID0gcC5ub2RlO1xuICB9XG5cbiAgd29ya2luZ05vZGUgPSBkb2MuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICB3b3JraW5nTm9kZS5pbm5lckhUTUwgPSAnJiNmZWZmOyc7XG5cbiAgaWYgKGJvdW5kKSB7XG4gICAgcGFyZW50Lmluc2VydEJlZm9yZSh3b3JraW5nTm9kZSwgYm91bmQpO1xuICB9IGVsc2Uge1xuICAgIHBhcmVudC5hcHBlbmRDaGlsZCh3b3JraW5nTm9kZSk7XG4gIH1cblxuICByYW5nZS5tb3ZlVG9FbGVtZW50VGV4dCh3b3JraW5nTm9kZSk7XG4gIHJhbmdlLmNvbGxhcHNlKCFzdGFydGluZyk7XG4gIHBhcmVudC5yZW1vdmVDaGlsZCh3b3JraW5nTm9kZSk7XG5cbiAgaWYgKGRhdGEpIHtcbiAgICByYW5nZVtzdGFydGluZyA/ICdtb3ZlU3RhcnQnIDogJ21vdmVFbmQnXSgnY2hhcmFjdGVyJywgb2Zmc2V0KTtcbiAgfVxuICByZXR1cm4gcmFuZ2U7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcmFuZ2VUb1RleHRSYW5nZTtcbiJdfQ==\n},{}],11:[function(require,module,exports){\n'use strict';\n\nvar getSelection = require('./getSelection');\nvar setSelection = require('./setSelection');\n\nmodule.exports = {\n  get: getSelection,\n  set: setSelection\n};\n\n},{\"./getSelection\":5,\"./setSelection\":12}],12:[function(require,module,exports){\n(function (global){\n'use strict';\n\nvar getSelection = require('./getSelection');\nvar rangeToTextRange = require('./rangeToTextRange');\nvar doc = global.document;\n\nfunction setSelection (p) {\n  if (doc.createRange) {\n    modernSelection();\n  } else {\n    oldSelection();\n  }\n\n  function modernSelection () {\n    var sel = getSelection();\n    var range = doc.createRange();\n    if (!p.startContainer) {\n      return;\n    }\n    if (p.endContainer) {\n      range.setEnd(p.endContainer, p.endOffset);\n    } else {\n      range.setEnd(p.startContainer, p.startOffset);\n    }\n    range.setStart(p.startContainer, p.startOffset);\n    sel.removeAllRanges();\n    sel.addRange(range);\n  }\n\n  function oldSelection () {\n    rangeToTextRange(p).select();\n  }\n}\n\nmodule.exports = setSelection;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9zZWxlY2Npb24vc3JjL3NldFNlbGVjdGlvbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBnZXRTZWxlY3Rpb24gPSByZXF1aXJlKCcuL2dldFNlbGVjdGlvbicpO1xudmFyIHJhbmdlVG9UZXh0UmFuZ2UgPSByZXF1aXJlKCcuL3JhbmdlVG9UZXh0UmFuZ2UnKTtcbnZhciBkb2MgPSBnbG9iYWwuZG9jdW1lbnQ7XG5cbmZ1bmN0aW9uIHNldFNlbGVjdGlvbiAocCkge1xuICBpZiAoZG9jLmNyZWF0ZVJhbmdlKSB7XG4gICAgbW9kZXJuU2VsZWN0aW9uKCk7XG4gIH0gZWxzZSB7XG4gICAgb2xkU2VsZWN0aW9uKCk7XG4gIH1cblxuICBmdW5jdGlvbiBtb2Rlcm5TZWxlY3Rpb24gKCkge1xuICAgIHZhciBzZWwgPSBnZXRTZWxlY3Rpb24oKTtcbiAgICB2YXIgcmFuZ2UgPSBkb2MuY3JlYXRlUmFuZ2UoKTtcbiAgICBpZiAoIXAuc3RhcnRDb250YWluZXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHAuZW5kQ29udGFpbmVyKSB7XG4gICAgICByYW5nZS5zZXRFbmQocC5lbmRDb250YWluZXIsIHAuZW5kT2Zmc2V0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmFuZ2Uuc2V0RW5kKHAuc3RhcnRDb250YWluZXIsIHAuc3RhcnRPZmZzZXQpO1xuICAgIH1cbiAgICByYW5nZS5zZXRTdGFydChwLnN0YXJ0Q29udGFpbmVyLCBwLnN0YXJ0T2Zmc2V0KTtcbiAgICBzZWwucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgc2VsLmFkZFJhbmdlKHJhbmdlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9sZFNlbGVjdGlvbiAoKSB7XG4gICAgcmFuZ2VUb1RleHRSYW5nZShwKS5zZWxlY3QoKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHNldFNlbGVjdGlvbjtcbiJdfQ==\n},{\"./getSelection\":5,\"./rangeToTextRange\":10}],13:[function(require,module,exports){\n'use strict';\n\nvar get = easyGet;\nvar set = easySet;\n\nif (document.selection && document.selection.createRange) {\n  get = hardGet;\n  set = hardSet;\n}\n\nfunction easyGet (el) {\n  return {\n    start: el.selectionStart,\n    end: el.selectionEnd\n  };\n}\n\nfunction hardGet (el) {\n  var active = document.activeElement;\n  if (active !== el) {\n    el.focus();\n  }\n\n  var range = document.selection.createRange();\n  var bookmark = range.getBookmark();\n  var original = el.value;\n  var marker = getUniqueMarker(original);\n  var parent = range.parentElement();\n  if (parent === null || !inputs(parent)) {\n    return result(0, 0);\n  }\n  range.text = marker + range.text + marker;\n\n  var contents = el.value;\n\n  el.value = original;\n  range.moveToBookmark(bookmark);\n  range.select();\n\n  return result(contents.indexOf(marker), contents.lastIndexOf(marker) - marker.length);\n\n  function result (start, end) {\n    if (active !== el) { // don't disrupt pre-existing state\n      if (active) {\n        active.focus();\n      } else {\n        el.blur();\n      }\n    }\n    return { start: start, end: end };\n  }\n}\n\nfunction getUniqueMarker (contents) {\n  var marker;\n  do {\n    marker = '@@marker.' + Math.random() * new Date();\n  } while (contents.indexOf(marker) !== -1);\n  return marker;\n}\n\nfunction inputs (el) {\n  return ((el.tagName === 'INPUT' && el.type === 'text') || el.tagName === 'TEXTAREA');\n}\n\nfunction easySet (el, p) {\n  el.selectionStart = parse(el, p.start);\n  el.selectionEnd = parse(el, p.end);\n}\n\nfunction hardSet (el, p) {\n  var range = el.createTextRange();\n\n  if (p.start === 'end' && p.end === 'end') {\n    range.collapse(false);\n    range.select();\n  } else {\n    range.collapse(true);\n    range.moveEnd('character', parse(el, p.end));\n    range.moveStart('character', parse(el, p.start));\n    range.select();\n  }\n}\n\nfunction parse (el, value) {\n  return value === 'end' ? el.value.length : value || 0;\n}\n\nfunction sell (el, p) {\n  if (arguments.length === 2) {\n    set(el, p);\n  }\n  return get(el);\n}\n\nmodule.exports = sell;\n\n},{}],14:[function(require,module,exports){\n(function (global){\n'use strict';\n\nvar sell = require('sell');\nvar crossvent = require('crossvent');\nvar seleccion = require('seleccion');\nvar throttle = require('./throttle');\nvar getSelection = seleccion.get;\nvar props = [\n  'direction',\n  'boxSizing',\n  'width',\n  'height',\n  'overflowX',\n  'overflowY',\n  'borderTopWidth',\n  'borderRightWidth',\n  'borderBottomWidth',\n  'borderLeftWidth',\n  'paddingTop',\n  'paddingRight',\n  'paddingBottom',\n  'paddingLeft',\n  'fontStyle',\n  'fontVariant',\n  'fontWeight',\n  'fontStretch',\n  'fontSize',\n  'fontSizeAdjust',\n  'lineHeight',\n  'fontFamily',\n  'textAlign',\n  'textTransform',\n  'textIndent',\n  'textDecoration',\n  'letterSpacing',\n  'wordSpacing'\n];\nvar win = global;\nvar doc = document;\nvar ff = win.mozInnerScreenX !== null && win.mozInnerScreenX !== void 0;\n\nfunction tailormade (el, options) {\n  var textInput = el.tagName === 'INPUT' || el.tagName === 'TEXTAREA';\n  var throttledRefresh = throttle(refresh, 30);\n  var o = options || {};\n\n  bind();\n\n  return {\n    read: readPosition,\n    refresh: throttledRefresh,\n    destroy: destroy\n  };\n\n  function noop () {}\n  function readPosition () { return (textInput ? coordsText : coordsHTML)(); }\n\n  function refresh () {\n    if (o.sleeping) {\n      return;\n    }\n    return (o.update || noop)(readPosition());\n  }\n\n  function coordsText () {\n    var p = sell(el);\n    var context = prepare();\n    var readings = readTextCoords(context, p.start);\n    doc.body.removeChild(context.mirror);\n    return readings;\n  }\n\n  function coordsHTML () {\n    var sel = getSelection();\n    if (sel.rangeCount) {\n      var range = sel.getRangeAt(0);\n      var needsToWorkAroundNewlineBug = range.startContainer.nodeName === 'P' && range.startOffset === 0;\n      if (needsToWorkAroundNewlineBug) {\n        return {\n          x: range.startContainer.offsetLeft,\n          y: range.startContainer.offsetTop,\n          absolute: true\n        };\n      }\n      if (range.getClientRects) {\n        var rects = range.getClientRects();\n        if (rects.length > 0) {\n          return {\n            x: rects[0].left,\n            y: rects[0].top,\n            absolute: true\n          };\n        }\n      }\n    }\n    return { x: 0, y: 0 };\n  }\n\n  function readTextCoords (context, p) {\n    var rest = doc.createElement('span');\n    var mirror = context.mirror;\n    var computed = context.computed;\n\n    write(mirror, read(el).substring(0, p));\n\n    if (el.tagName === 'INPUT') {\n      mirror.textContent = mirror.textContent.replace(/\\s/g, '\\u00a0');\n    }\n\n    write(rest, read(el).substring(p) || '.');\n\n    mirror.appendChild(rest);\n\n    return {\n      x: rest.offsetLeft + parseInt(computed['borderLeftWidth']),\n      y: rest.offsetTop + parseInt(computed['borderTopWidth'])\n    };\n  }\n\n  function read (el) {\n    return textInput ? el.value : el.innerHTML;\n  }\n\n  function prepare () {\n    var computed = win.getComputedStyle ? getComputedStyle(el) : el.currentStyle;\n    var mirror = doc.createElement('div');\n    var style = mirror.style;\n\n    doc.body.appendChild(mirror);\n\n    if (el.tagName !== 'INPUT') {\n      style.wordWrap = 'break-word';\n    }\n    style.whiteSpace = 'pre-wrap';\n    style.position = 'absolute';\n    style.visibility = 'hidden';\n    props.forEach(copy);\n\n    if (ff) {\n      style.width = parseInt(computed.width) - 2 + 'px';\n      if (el.scrollHeight > parseInt(computed.height)) {\n        style.overflowY = 'scroll';\n      }\n    } else {\n      style.overflow = 'hidden';\n    }\n    return { mirror: mirror, computed: computed };\n\n    function copy (prop) {\n      style[prop] = computed[prop];\n    }\n  }\n\n  function write (el, value) {\n    if (textInput) {\n      el.textContent = value;\n    } else {\n      el.innerHTML = value;\n    }\n  }\n\n  function bind (remove) {\n    var op = remove ? 'remove' : 'add';\n    crossvent[op](el, 'keydown', throttledRefresh);\n    crossvent[op](el, 'keyup', throttledRefresh);\n    crossvent[op](el, 'input', throttledRefresh);\n    crossvent[op](el, 'paste', throttledRefresh);\n    crossvent[op](el, 'change', throttledRefresh);\n  }\n\n  function destroy () {\n    bind(true);\n  }\n}\n\nmodule.exports = tailormade;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRhaWxvcm1hZGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgc2VsbCA9IHJlcXVpcmUoJ3NlbGwnKTtcbnZhciBjcm9zc3ZlbnQgPSByZXF1aXJlKCdjcm9zc3ZlbnQnKTtcbnZhciBzZWxlY2Npb24gPSByZXF1aXJlKCdzZWxlY2Npb24nKTtcbnZhciB0aHJvdHRsZSA9IHJlcXVpcmUoJy4vdGhyb3R0bGUnKTtcbnZhciBnZXRTZWxlY3Rpb24gPSBzZWxlY2Npb24uZ2V0O1xudmFyIHByb3BzID0gW1xuICAnZGlyZWN0aW9uJyxcbiAgJ2JveFNpemluZycsXG4gICd3aWR0aCcsXG4gICdoZWlnaHQnLFxuICAnb3ZlcmZsb3dYJyxcbiAgJ292ZXJmbG93WScsXG4gICdib3JkZXJUb3BXaWR0aCcsXG4gICdib3JkZXJSaWdodFdpZHRoJyxcbiAgJ2JvcmRlckJvdHRvbVdpZHRoJyxcbiAgJ2JvcmRlckxlZnRXaWR0aCcsXG4gICdwYWRkaW5nVG9wJyxcbiAgJ3BhZGRpbmdSaWdodCcsXG4gICdwYWRkaW5nQm90dG9tJyxcbiAgJ3BhZGRpbmdMZWZ0JyxcbiAgJ2ZvbnRTdHlsZScsXG4gICdmb250VmFyaWFudCcsXG4gICdmb250V2VpZ2h0JyxcbiAgJ2ZvbnRTdHJldGNoJyxcbiAgJ2ZvbnRTaXplJyxcbiAgJ2ZvbnRTaXplQWRqdXN0JyxcbiAgJ2xpbmVIZWlnaHQnLFxuICAnZm9udEZhbWlseScsXG4gICd0ZXh0QWxpZ24nLFxuICAndGV4dFRyYW5zZm9ybScsXG4gICd0ZXh0SW5kZW50JyxcbiAgJ3RleHREZWNvcmF0aW9uJyxcbiAgJ2xldHRlclNwYWNpbmcnLFxuICAnd29yZFNwYWNpbmcnXG5dO1xudmFyIHdpbiA9IGdsb2JhbDtcbnZhciBkb2MgPSBkb2N1bWVudDtcbnZhciBmZiA9IHdpbi5tb3pJbm5lclNjcmVlblggIT09IG51bGwgJiYgd2luLm1veklubmVyU2NyZWVuWCAhPT0gdm9pZCAwO1xuXG5mdW5jdGlvbiB0YWlsb3JtYWRlIChlbCwgb3B0aW9ucykge1xuICB2YXIgdGV4dElucHV0ID0gZWwudGFnTmFtZSA9PT0gJ0lOUFVUJyB8fCBlbC50YWdOYW1lID09PSAnVEVYVEFSRUEnO1xuICB2YXIgdGhyb3R0bGVkUmVmcmVzaCA9IHRocm90dGxlKHJlZnJlc2gsIDMwKTtcbiAgdmFyIG8gPSBvcHRpb25zIHx8IHt9O1xuXG4gIGJpbmQoKTtcblxuICByZXR1cm4ge1xuICAgIHJlYWQ6IHJlYWRQb3NpdGlvbixcbiAgICByZWZyZXNoOiB0aHJvdHRsZWRSZWZyZXNoLFxuICAgIGRlc3Ryb3k6IGRlc3Ryb3lcbiAgfTtcblxuICBmdW5jdGlvbiBub29wICgpIHt9XG4gIGZ1bmN0aW9uIHJlYWRQb3NpdGlvbiAoKSB7IHJldHVybiAodGV4dElucHV0ID8gY29vcmRzVGV4dCA6IGNvb3Jkc0hUTUwpKCk7IH1cblxuICBmdW5jdGlvbiByZWZyZXNoICgpIHtcbiAgICBpZiAoby5zbGVlcGluZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZXR1cm4gKG8udXBkYXRlIHx8IG5vb3ApKHJlYWRQb3NpdGlvbigpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvb3Jkc1RleHQgKCkge1xuICAgIHZhciBwID0gc2VsbChlbCk7XG4gICAgdmFyIGNvbnRleHQgPSBwcmVwYXJlKCk7XG4gICAgdmFyIHJlYWRpbmdzID0gcmVhZFRleHRDb29yZHMoY29udGV4dCwgcC5zdGFydCk7XG4gICAgZG9jLmJvZHkucmVtb3ZlQ2hpbGQoY29udGV4dC5taXJyb3IpO1xuICAgIHJldHVybiByZWFkaW5ncztcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvb3Jkc0hUTUwgKCkge1xuICAgIHZhciBzZWwgPSBnZXRTZWxlY3Rpb24oKTtcbiAgICBpZiAoc2VsLnJhbmdlQ291bnQpIHtcbiAgICAgIHZhciByYW5nZSA9IHNlbC5nZXRSYW5nZUF0KDApO1xuICAgICAgdmFyIG5lZWRzVG9Xb3JrQXJvdW5kTmV3bGluZUJ1ZyA9IHJhbmdlLnN0YXJ0Q29udGFpbmVyLm5vZGVOYW1lID09PSAnUCcgJiYgcmFuZ2Uuc3RhcnRPZmZzZXQgPT09IDA7XG4gICAgICBpZiAobmVlZHNUb1dvcmtBcm91bmROZXdsaW5lQnVnKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgeDogcmFuZ2Uuc3RhcnRDb250YWluZXIub2Zmc2V0TGVmdCxcbiAgICAgICAgICB5OiByYW5nZS5zdGFydENvbnRhaW5lci5vZmZzZXRUb3AsXG4gICAgICAgICAgYWJzb2x1dGU6IHRydWVcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGlmIChyYW5nZS5nZXRDbGllbnRSZWN0cykge1xuICAgICAgICB2YXIgcmVjdHMgPSByYW5nZS5nZXRDbGllbnRSZWN0cygpO1xuICAgICAgICBpZiAocmVjdHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB4OiByZWN0c1swXS5sZWZ0LFxuICAgICAgICAgICAgeTogcmVjdHNbMF0udG9wLFxuICAgICAgICAgICAgYWJzb2x1dGU6IHRydWVcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7IHg6IDAsIHk6IDAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlYWRUZXh0Q29vcmRzIChjb250ZXh0LCBwKSB7XG4gICAgdmFyIHJlc3QgPSBkb2MuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgIHZhciBtaXJyb3IgPSBjb250ZXh0Lm1pcnJvcjtcbiAgICB2YXIgY29tcHV0ZWQgPSBjb250ZXh0LmNvbXB1dGVkO1xuXG4gICAgd3JpdGUobWlycm9yLCByZWFkKGVsKS5zdWJzdHJpbmcoMCwgcCkpO1xuXG4gICAgaWYgKGVsLnRhZ05hbWUgPT09ICdJTlBVVCcpIHtcbiAgICAgIG1pcnJvci50ZXh0Q29udGVudCA9IG1pcnJvci50ZXh0Q29udGVudC5yZXBsYWNlKC9cXHMvZywgJ1xcdTAwYTAnKTtcbiAgICB9XG5cbiAgICB3cml0ZShyZXN0LCByZWFkKGVsKS5zdWJzdHJpbmcocCkgfHwgJy4nKTtcblxuICAgIG1pcnJvci5hcHBlbmRDaGlsZChyZXN0KTtcblxuICAgIHJldHVybiB7XG4gICAgICB4OiByZXN0Lm9mZnNldExlZnQgKyBwYXJzZUludChjb21wdXRlZFsnYm9yZGVyTGVmdFdpZHRoJ10pLFxuICAgICAgeTogcmVzdC5vZmZzZXRUb3AgKyBwYXJzZUludChjb21wdXRlZFsnYm9yZGVyVG9wV2lkdGgnXSlcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gcmVhZCAoZWwpIHtcbiAgICByZXR1cm4gdGV4dElucHV0ID8gZWwudmFsdWUgOiBlbC5pbm5lckhUTUw7XG4gIH1cblxuICBmdW5jdGlvbiBwcmVwYXJlICgpIHtcbiAgICB2YXIgY29tcHV0ZWQgPSB3aW4uZ2V0Q29tcHV0ZWRTdHlsZSA/IGdldENvbXB1dGVkU3R5bGUoZWwpIDogZWwuY3VycmVudFN0eWxlO1xuICAgIHZhciBtaXJyb3IgPSBkb2MuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdmFyIHN0eWxlID0gbWlycm9yLnN0eWxlO1xuXG4gICAgZG9jLmJvZHkuYXBwZW5kQ2hpbGQobWlycm9yKTtcblxuICAgIGlmIChlbC50YWdOYW1lICE9PSAnSU5QVVQnKSB7XG4gICAgICBzdHlsZS53b3JkV3JhcCA9ICdicmVhay13b3JkJztcbiAgICB9XG4gICAgc3R5bGUud2hpdGVTcGFjZSA9ICdwcmUtd3JhcCc7XG4gICAgc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgIHN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgICBwcm9wcy5mb3JFYWNoKGNvcHkpO1xuXG4gICAgaWYgKGZmKSB7XG4gICAgICBzdHlsZS53aWR0aCA9IHBhcnNlSW50KGNvbXB1dGVkLndpZHRoKSAtIDIgKyAncHgnO1xuICAgICAgaWYgKGVsLnNjcm9sbEhlaWdodCA+IHBhcnNlSW50KGNvbXB1dGVkLmhlaWdodCkpIHtcbiAgICAgICAgc3R5bGUub3ZlcmZsb3dZID0gJ3Njcm9sbCc7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG4gICAgfVxuICAgIHJldHVybiB7IG1pcnJvcjogbWlycm9yLCBjb21wdXRlZDogY29tcHV0ZWQgfTtcblxuICAgIGZ1bmN0aW9uIGNvcHkgKHByb3ApIHtcbiAgICAgIHN0eWxlW3Byb3BdID0gY29tcHV0ZWRbcHJvcF07XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gd3JpdGUgKGVsLCB2YWx1ZSkge1xuICAgIGlmICh0ZXh0SW5wdXQpIHtcbiAgICAgIGVsLnRleHRDb250ZW50ID0gdmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsLmlubmVySFRNTCA9IHZhbHVlO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGJpbmQgKHJlbW92ZSkge1xuICAgIHZhciBvcCA9IHJlbW92ZSA/ICdyZW1vdmUnIDogJ2FkZCc7XG4gICAgY3Jvc3N2ZW50W29wXShlbCwgJ2tleWRvd24nLCB0aHJvdHRsZWRSZWZyZXNoKTtcbiAgICBjcm9zc3ZlbnRbb3BdKGVsLCAna2V5dXAnLCB0aHJvdHRsZWRSZWZyZXNoKTtcbiAgICBjcm9zc3ZlbnRbb3BdKGVsLCAnaW5wdXQnLCB0aHJvdHRsZWRSZWZyZXNoKTtcbiAgICBjcm9zc3ZlbnRbb3BdKGVsLCAncGFzdGUnLCB0aHJvdHRsZWRSZWZyZXNoKTtcbiAgICBjcm9zc3ZlbnRbb3BdKGVsLCAnY2hhbmdlJywgdGhyb3R0bGVkUmVmcmVzaCk7XG4gIH1cblxuICBmdW5jdGlvbiBkZXN0cm95ICgpIHtcbiAgICBiaW5kKHRydWUpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdGFpbG9ybWFkZTtcbiJdfQ==\n},{\"./throttle\":15,\"crossvent\":3,\"seleccion\":11,\"sell\":13}],15:[function(require,module,exports){\n'use strict';\n\nfunction throttle (fn, boundary) {\n  var last = -Infinity;\n  var timer;\n  return function bounced () {\n    if (timer) {\n      return;\n    }\n    unbound();\n\n    function unbound () {\n      clearTimeout(timer);\n      timer = null;\n      var next = last + boundary;\n      var now = Date.now();\n      if (now > next) {\n        last = now;\n        fn();\n      } else {\n        timer = setTimeout(unbound, next - now);\n      }\n    }\n  };\n}\n\nmodule.exports = throttle;\n\n},{}]},{},[1])(1)\n});\n","define('auto-complete',['../lib/bullseye'], function(bullseye){\n\t\n\treturn Backbone.View.extend({\n\t\t\n\t\tclassName: 'token-editor-auto-complete',\n\t\t\n\t\tmenu: [],\n\t\t\n\t\t_defaultOptions: {\n\t\t\titems: [],\n\t\t\tminLen: 2,\n\t\t\tmaxResults: 4,\n\t\t\tminScore: 0.9\n\t\t},\n\t\t\n\t\tevents: {\n\t\t\t'click > div': 'onClick'\n\t\t},\n\t\t\n\t\tinitialize: function(){\n\t\t\t\n\t\t\tthis.options = _.extend(this._defaultOptions, this.options||{});\n\t\t\t\n\t\t\tdocument.body.appendChild( this.el );\n\t\t\t\n\t\t\tthis.position = bullseye(this.el, this.options.target, {\n\t\t\t\tcaret: true,\n\t\t\t\tautoupdateToCaret: true\n\t\t\t})\n\t\t\t\n\t\t\tthis.hide();\n\t\t},\n\t\t\n\t\tsetItems: function(items){\n\t\t\tthis.options.items = items\n\t\t},\n\t\t\n\t\tbindKeyboardEvents: function(){\n\t\t\tthis.onKeydown = this.onKeydown || this._onKeydown.bind(this)\n\t\t\tthis.onKeyup = this.onKeyup || this._onKeyup.bind(this)\n\t\t\tdocument.body.addEventListener('keydown', this.onKeydown, true)\n\t\t\tdocument.body.addEventListener('keyup', this.onKeyup, true)\n\t\t},\n\t\t\n\t\tunbindKeyboardEvents: function(){\n\t\t\tdocument.body.removeEventListener('keydown', this.onKeydown, true)\n\t\t\tdocument.body.removeEventListener('keyup', this.onKeyup, true)\n\t\t},\n\t\t\n\t\t_onKeydown: function(e){\n\t\t\t\n\t\t\tif( e.which == 27 || e.which == 38 || e.which == 40 || e.which == 13 || e.which == 9 ){\n\t\t\t\t\n\t\t\t\tif( e.which == 27 ) // esc\n\t\t\t\t\tthis.hide();\n\t\t\t\telse if( e.which == 13 || e.which == 9 ) // enter or tab\n\t\t\t\t\tthis.onSelect()\n\t\t\t\telse if( e.which == 38 ) // up\n\t\t\t\t\tthis.selectPrev();\n\t\t\t\telse if( e.which == 40 ) // down\n\t\t\t\t\tthis.selectNext();\n\t\t\t\t\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation()\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t},\n\t\t\n\t\t_onKeyup: function(e){\n\t\t\tif( e.which == 27 || e.which == 38 || e.which == 40 || e.which == 13 ){\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation()\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t\n\t\tselectPrev: function(){\n\t\t\tthis._selectIndex( this.selected - 1 < 0 ? this.menu.length -1 : this.selected - 1)\n\t\t},\n\t\t\n\t\tselectNext: function(){\n\t\t\tthis._selectIndex( this.selected + 1 >= this.menu.length ? 0 : this.selected + 1)\n\t\t},\n\t\t\n\t\t_selectIndex: function(indx){\n\t\t\tthis.el.childNodes[this.selected].classList.remove('selected')\n\t\t\tthis.el.childNodes[indx].classList.add('selected')\n\t\t\tthis.selected = indx;\n\t\t},\n\t\t\n\t\tonClick: function(e){\n\t\t\tModal.alert('Use the <u>up</u> and <u>down</u> keys and press <code>enter</code> to select.')\n\t\t\t/*var el = e.currentTarget;\n\t\t\tthis.selected = Array.prototype.indexOf.call(el.parentNode.childNodes, el);\n\t\t\tconsole.log(this.selected, el);\n\t\t\tthis.onSelect();*/\n\t\t},\n\t\t\n\t\tonSelect: function(){\n\t\t\tthis.trigger('select', this.menu[this.selected], this)\n\t\t},\n\t\t\n\t\trender: function(word){\n\t\t\t\n\t\t\tthis.$el.html('')\n\t\t\t\n\t\t\tif( !word || word.length < this.options.minLen ){\n\t\t\t\tthis.hide();\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tthis.menuFor(word)\n\t\t\t\t\n\t\t\t\tif( this.menu.length > 0 ){\n\t\t\t\t\tthis.show();\n\t\t\t\t\tthis.selected = 0;\n\t\t\t\t\tthis.menu.forEach(this.addMenuItem.bind(this))\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t\n\t\taddMenuItem: function(m, indx){\n\t\t\tthis.$el.append('<div class=\"'+(indx==this.selected?'selected':'')+'\" data=id=\"'+m.id+'\">'+m.label+'</div>')\n\t\t},\n\t\t\n\t\t_score: function(str, term){\n\t\t\tif( typeof LiquidMetal === 'undefined' && !this._noScoreWarning ){\n\t\t\t\tthis._noScoreWarning = true;\n\t\t\t\tconsole.warn('TokenEditor: cannot score auto complete results; LiquidMetal plugin is missing.');\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn LiquidMetal.score(str, term)\n\t\t\t}\n\t\t},\n\t\t\n\t\t_scoreItem: function(m, word){\n\t\t\tvar scores = []\n\t\t\t\n\t\t\tscores.push(this._score(m.label, word))\n\t\t\t\n\t\t\t// simple string hint\n\t\t\tif( m.hint && typeof m.hint == 'string' )\n\t\t\t\tscores.push(this._score(m.hint, word))\n\t\t\t\n\t\t\t// array of hints\n\t\t\tif( m.hint && Array.isArray(m.hint) )\n\t\t\t\tm.hint.forEach(function(str){\n\t\t\t\t\tscores.push(this._score(str, word))\n\t\t\t\t})\n\t\t\t\n\t\t\treturn scores.sort().pop() // return the highest score\n\t\t},\n\t\t\n\t\tmenuFor: function(word){\n\t\t\tvar menu = [];\n\t\t\t\n\t\t\tif( this.options.items )\n\t\t\tthis.options.items.forEach(function(m){\n\t\t\t\t\n\t\t\t\tvar score = this._scoreItem(m, word);\n\t\t\t\t\n\t\t\t\tif( score >= this.options.minScore ){\n\t\t\t\t\t\n\t\t\t\t\tm.score = score;\n\t\t\t\t\t\n\t\t\t\t\tmenu.push(m)\n\t\t\t\t}\n\t\t\t}.bind(this))\n\t\t\t\n\t\t\t_.sortBy(menu, function(m){ return m.score })\n\t\t\t\n\t\t\treturn this.menu = menu;\n\t\t},\n\t\t\n\t\tshow: function(){\n\t\t\t\n\t\t\tif( this.isShowing ) return;\n\t\t\t\n\t\t\tthis.isShowing = true\n\t\t\tthis.el.classList.add('show')\n\t\t\tthis.bindKeyboardEvents();\n\t\t\tthis.position.refresh();\n\t\t},\n\t\t\n\t\thide: function(){\n\t\t\tthis.isShowing = false;\n\t\t\tthis.el.classList.remove('show')\n\t\t\tthis.unbindKeyboardEvents();\n\t\t\tthis.position.sleep();\n\t\t}\n\t\t\n\t})\n\t\n});\n","/*\n\tToken Editor 0.2.0\n\t\n\tA basic text editor with tokens that are used via auto-complete.\n\tTokens can not be modified by the keyboard but appear as \"objects\" within\n\tthe text box.\n\t\n\tThis plugin merges the idea of a \"tag list\" and \"@mention\" auto-complete.\n\t\n\thttp://kjantzer.github.io/backbone-token-editor/\n\t\n\t@author Kevin Jantzer, Blackstone Audio Inc.\n\t@since 2015-08-24\n\t\n\t@DEPENDENCIES\n\t[Bullseye](https://github.com/bevacqua/bullseye)\n\t\n\tTODO:\n\t- `&nbsp;` appears sometimes when typing after a token\n\t- maybe remove need for Backbone.subviews?\n\t- with multiLines:false, think about adding styles and code to make it perform more like an input\n\t\n*/\ndefine('token-editor',['auto-complete'], function(AutoCompleteView){\n\t\n\treturn Backbone.View.extend({\n\t\t\n\t\tclassName: 'token-editor',\n\t\t\n\t\t_defaultOptions: {\n\t\t\tclassName: '',\n\t\t\tvalue: '',\t\t\t\t// html string or JSON format,\n\t\t\tautoComplete: {},\t\t// options for auto complete\n\t\t\tmultiLines: true,\n\t\t\tallowPaste: false,\n\t\t\tallowStyling: false,\t// bold/italics keyboard shorcuts\n\t\t\tediting: false, \t\t// set to true if you want to be in edit mode upon init\n\t\t\tdblClickToEdit: true\n\t\t},\n\t\t\n\t\tevents: {\n\t\t\t'dblclick': 'onDblClick',\n\t\t\t'click': 'onClick',\n\t\t\t'blur': 'onBlur',\n\t\t\t'keydown': 'onKeydown',\n\t\t\t'keyup': 'onKeyup',\n\t\t\t'keypress': 'onKeypress',\n\t\t\t'paste': 'onPaste'\n\t\t},\n\t\t\n\t\tinitialize: function(){\n\t\t\t\n\t\t\twindow.tokenEditor = this; // TEMP\n\t\t\t\n\t\t\tthis.options = _.extend({}, this._defaultOptions, this.options||{});\n\t\t\tthis.history =[];\n\t\t\tthis.historyAt = 0;\n\t\t\t\n\t\t\tif( this.options.className )\n\t\t\t\tthis.el.classList.add(this.options.className)\n\t\t\t\n\t\t\tvar autoCompleteOptions = this.options.autoComplete;\n\t\t\tautoCompleteOptions.target = this.el;\n\t\t\t\n\t\t\tthis.subview('auto-complete') || this.subview('auto-complete', new AutoCompleteView(autoCompleteOptions))\n\t\t\tthis.listenTo(this.subview('auto-complete'), 'select', this.onAutoCompleteSelect)\n\t\t\t\n\t\t\tif( this.options.items )\n\t\t\t\tthis.setAutoCompleteItems(this.options.items)\n\t\t\t\t\n\t\t\tthis.setValue()\n\t\t\tthis.markHistory();\n\t\t\t\n\t\t\tif( this.options.editing )\n\t\t\t\tthis.edit();\n\t\t},\n\t\t\n\t\tisEditing: function(){\n\t\t\treturn this.el.contentEditable == 'true'\n\t\t},\n\t\t\n\t\tedit: function(doEdit){\n\t\t\tthis.el.contentEditable = doEdit !== false\n\t\t},\n\t\t\n\t\trender: function(){\n\t\t\t\n\t\t\tthis.delegateEvents();\n\t\t\t\n\t\t\treturn this;\n\t\t},\n\t\t\n\t\tsetValue: function(val){\n\t\t\t\n\t\t\tif( arguments.length == 0 )\n\t\t\t\tval = this.options.value;\n\t\t\telse\n\t\t\t\tthis.options.value = val;\n\t\t\t\t\n\t\t\tvar html = typeof val == 'string' ? val : this.jsonToHTML(val)\n\t\t\t\n\t\t\tthis.el.innerHTML = html;\n\t\t\t\n\t\t\thtml ? this.el.classList.remove('empty') : this.el.classList.add('empty')\n\t\t\t\n\t\t\tthis.endWithBrTag();\n\t\t},\n\t\t\n\t\t// sets the items available in 'auto complete'\n\t\tsetAutoCompleteItems: function(items){\n\t\t\tthis.items = items;\n\t\t\tthis.subview('auto-complete').setItems(items);\n\t\t},\n\t\t\n\t\t// when a users selects an 'auto complete' item\n\t\tonAutoCompleteSelect: function(data, autoComplete){\n\t\t\tautoComplete.hide();\n\t\t\tthis.replaceWithToken(data)\n\t\t},\n\t\t\n\t\tonDblClick: function(){\n\t\t\tif( this.options.dblClickToEdit == true && !this.isEditing() ){\n\t\t\t\tthis.edit(true)\n\t\t\t\tthis.focusEnd();\n\t\t\t}\n\t\t},\n\t\t\n\t\t// when clicked somewhere else in the editor, hide auto complete\n\t\tonClick: function(){ this.subview('auto-complete').hide(); },\n\t\tonBlur: function(){ this.subview('auto-complete').hide(); this.trigger('blur', this) },\n\t\t\n\t\tmakeToken: function(d){\n\t\t\tvar node = document.createElement('span');\n\t\t\tnode.contentEditable = false;\n\t\t\tnode.classList.add('token');\n\t\t\t\n\t\t\t_.each(d.attrs, function(val, key){\n\t\t\t\tnode.setAttribute('data-'+key, val);\n\t\t\t})\n\t\t\t\n\t\t\tvar label = document.createElement('span');\n\t\t\tlabel.innerHTML = d.label;\n\t\t\tnode.appendChild(label)\n\t\t\t\n\t\t\treturn node.outerHTML;\n\t\t\t\n\t\t\treturn '<span contenteditable=false class=\"token\" data-id=\"'+d.id+'\"><span>'+d.label+'</span></span>';\n\t\t},\n\t\t\n\t\tinsertToken: function(d){\n\t\t\tthis.insertHTML( this.makeToken(d) )\n\t\t},\n\t\t\n\t\treplaceWithToken: function(token){\n\t\t\t\n\t\t\tclearTimeout( this.historyTimeout )\n\t\t\t\n\t\t\tvar sel = window.getSelection(),\n\t\t\t\trange = sel.getRangeAt(0),\n\t\t\t\ttext = range.endContainer.textContent.slice(0, range.endOffset ),\n\t\t\t\tlastSpace = text.lastIndexOf(' ') > -1 ? text.lastIndexOf(' ') : text.lastIndexOf(' ');\n\t\t\t\tword = lastSpace > -1 ? text.slice(lastSpace+1) : text;\n\t\t\t\n\t\t\t// delete the word the user was typing so we can replace it with a token\n\t\t\trange.setStart(range.endContainer, lastSpace+1);\n\t\t\trange.deleteContents();\n\t\t\t\n\t\t\tthis.insertToken(token);\n\t\t},\n\t\t\n\t\tcurrentWord: function(){\n\t\t\t\t\n\t\t\tvar sel = window.getSelection(),\n\t\t\t\trange = sel.getRangeAt(0);\n\t\t\t\n\t\t\tif( range.endContainer == this.el \n\t\t\t|| !range.endContainer.textContent ) return;\n\t\t\t\n\t\t\tvar text = range.endContainer.textContent.slice(0, range.endOffset ),\n\t\t\t\tlastSpace = text.lastIndexOf(' ') > -1 ? text.lastIndexOf(' ') : text.lastIndexOf(' ');\n\t\t\t\tword = lastSpace > -1 ? text.slice(lastSpace+1) : text;\n\t\t\t\n\t\t\t//console.log('current word: ', word);\n\t\t\treturn word;\n\t\t},\n\t\t\n\t\tonPaste: function(e){\n\t\t\tif( this.options.allowPaste != true ){\n\t\t\t\te.preventDefault(); // disable pasting so we dont have to do style cleanup\n\t\t\t\treturn false;\n\t\t\t}else{\n\t\t\t\tthis.markHistoryIn(0);\n\t\t\t}\n\t\t},\n\t\t\n\t\tonKeydown: function(e){\n\t\t\t\n\t\t\tif( e.which === 27 ){ // esc\n\t\t\t\tthis.trigger('cancel', this)\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// disable style commands like bold an italic\n\t\t\tif( this.metaKey() && (e.keyCode === 66 /* bold */ || e.keyCode === 73 /* italics */)){\n\t\t\t\t\n\t\t\t\tif( this.options.allowStyling !== true )\n\t\t\t\t\treturn false;\n\t\t\t\telse\n\t\t\t\t\tthis.markHistoryIn(0);\n\t\t\t}\n\t\t\t\n\t\t\t// override undo/redo for our own built in history manager\n\t\t\tif( this.metaKey() && e.keyCode === 90 ){ // ctrl/cmd + z\n\t\t\t\te.shiftKey ? this.redo() : this.undo()\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\t// on enter, force `<br>` tags instead of <div> or <p>\n\t\t\tif (e.keyCode === 13) {\n\t\t\t\t\n\t\t\t\tif( this.options.multiLines != true ) return false;\n\t\t\t\t\n\t\t\t\t// if at the end of editor, a trailing <br> is needed to make the cursor jump to the next line\n\t\t\t\tif( this.getSelection().start >= this.length() )\n\t\t\t\t\tdocument.execCommand('insertHTML', false, '<br class=\"newline\"><br>');\n\t\t\t\telse\n\t\t\t\t\tdocument.execCommand('insertHTML', false, '<br class=\"newline\">');\n\t\t\t\t\t\n\t\t\t\tthis.markHistoryIn(0);\n\t\t\t\t\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t\n\t\tonKeyup: function(e){\n\t\t\t\n\t\t\t// re-render auto-complete with the current word\n\t\t\t_.defer(function(){\n\t\t\t\tthis.subview('auto-complete').render( this.currentWord() )\n\t\t\t}.bind(this))\n\t\t\t\n\t\t\t// backspace\n\t\t\tif( e.which == 8 )\n\t\t\t\tthis.markHistoryIn(500);\n\t\t\t\n\t\t\t// make sure we end with a `<br>` tag.\n\t\t\tclearTimeout( this.keyupTimeout )\n\t\t\tthis.keyupTimeout = setTimeout(this.endWithBrTag.bind(this), 300);\n\t\t\t\n\t\t},\n\t\t\n\t\tonKeypress: function(e){\n\t\t\tthis.markHistoryIn(500);\n\t\t},\n\t\t\n\t\tendWithBrTag: function () {\n\t\t\t\n\t\t\t// dont do this if auto complete showing, cause when calling `replaceWithToken`;\n\t\t\t// it would replace more than the word if 300ms passed before selecting\n\t\t\tif( this.subview('auto-complete').isShowing ) return;\n\t\t\t\n\t\t\tif( !this.el.innerHTML.match(/<br>$/) ){\n\t\t\t\t\n\t\t\t\tif( !this.isInFocus() )\n\t\t\t\t\tthis.focusEnd();\n\t\t\t\t\n\t\t\t\tvar sel = window.getSelection();\n\t\t\t\t\n\t\t\t\t// no selection after telling to focus? then the editor is not in the DOM\n\t\t\t\tif( sel.type == 'None'){\n\t\t\t\t\tthis.el.appendChild(document.createElement('br'))\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvar range = sel.getRangeAt(0);\n\t\t\t\tvar frag = document.createDocumentFragment()\n\t\t\t\tvar br = frag.appendChild( document.createElement('br') );\n\t\t\t\t\n\t\t\t\t//document.execCommand('insertHTML', false, frag);\n\t\t\t\tthis.el.appendChild(frag)\n\t\t\t\t\n\t\t\t\t// this breaks in Safari....\n\t\t\t\trange = range.cloneRange();\n\t\t\t\trange.setStartBefore(br);\n\t\t\t\trange.collapse(true);\n\t\t\t\tsel.removeAllRanges();\n\t\t\t\tsel.addRange(range);\n\t\t\t}\n\t\t\t\n\t\t},\n\t\t\n\t\tinsertHTML: function(html){\n\t\t\t\n\t\t\tif( !this.isInFocus() )\n\t\t\t\tthis.focusEnd();\n\t\t\t\n\t\t\t// http://stackoverflow.com/a/6691294/484780\n\t\t\tsel = window.getSelection();\n\t\t\t\n\t        if (sel.getRangeAt && sel.rangeCount) {\n\t            range = sel.getRangeAt(0);\n\t            range.deleteContents();\n\n\t            var el = document.createElement(\"div\");\n\t            el.innerHTML = html;\n\t\t\t\t\n\t            var frag = document.createDocumentFragment(), node, lastNode;\n\t            \n\t\t\t\twhile ( (node = el.firstChild) ) {\n\t                lastNode = frag.appendChild(node);\n\t            }\n\t\t\t\t\n\t            range.insertNode(frag);\n\n\t            // Preserve the selection\n\t            if (lastNode) {\n\t                range = range.cloneRange();\n\t                range.setStartAfter(lastNode);\n\t                range.collapse(true);\n\t                sel.removeAllRanges();\n\t                sel.addRange(range);\n\t            }\n\t\t\t\t\n\t\t\t\tthis.markHistory();\n\t        }\n\t\t\n\t\t},\n\t\t\n\t\tlength: function(){\n\t\t\treturn this.el.innerText.trim().replace(/\\n/g, '').length\n\t\t},\n\t\t\n\t\tisInFocus: function(){\n\t\t\treturn document.activeElement == this.el\n\t\t},\n\t\t\n\t\t// focuses editor and sets caret position\n\t\tfocus: function(atChar){\n\t\t\tif( atChar === undefined || atChar < 0 || atChar > this.length() )\n\t\t\t\tatChar = 0;\n\t\t\t\n\t\t\tthis.setSelection(atChar, atChar);\n\t\t},\n\t\t\n\t\t// focuses editor at the end\n\t\tfocusEnd: function(){\n\t\t\tthis.focus(this.length())\n\t\t},\n\t\t\n\t\tselectAll: function(){ this.setSelection(0, this.length()) },\n\t\t\n\t\tjsonToHTML: function(json){\n\t\t\tvar self = this;\n\t\t\tvar lines = _.map(json, function(row){\n\t\t\t\treturn _.reduce(row, function(str, d){\n\t\t\t\t\tif( typeof d == 'string' )\n\t\t\t\t\t\treturn str + d\n\t\t\t\t\telse if( d.label !== undefined )\n\t\t\t\t\t\treturn str + self.makeToken(d)\n\t\t\t\t\t\t\n\t\t\t\t\t// legacy support\n\t\t\t\t\telse\n\t\t\t\t\t\treturn str + self._objectTextareaObjectToHTML(d)\n\t\t\t\t}, '')\n\t\t\t})\n\t\t\treturn lines.join('<br class=\"newline\">');\n\t\t},\n\t\t\n\t\t// legacy support\n\t\t_objectTextareaObjectToHTML: function(d){\n\t\t\tif( d.type == 'text' )\n\t\t\t\treturn d.data.text;\n\t\t\t\n\t\t\tvar attrs = _.clone(d.data);\n\t\t\tvar label = d.data.text; delete attrs.text;\n\t\t\t\n\t\t\treturn this.makeToken({label: label, attrs: attrs})\n\t\t},\n\t\t\n\t\ttoHTML: function(){\n\t\t\treturn this.el.innerHTML.replace(/<br>$/, '');\n\t\t},\n\t\t\n\t\ttoString: function(lineSeparator){\n\t\t\tlineSeparator = lineSeparator || \"\\n\";\n\t\t\tvar html = _.stripTags( this.toHTML().replace(/<br class=\"newline\">/g, \"||\") )\n\t\t\treturn html.replace(/\\|\\|/g, lineSeparator)\n\t\t},\n\t\t\n\t\t// creates a JSON structure of the editor content\n\t\ttoJSON: function(){\n\t\t\t\n\t\t\tvar html = this.toHTML();\n\t\t\t\n\t\t\tif( !html ) return [];\n\t\t\t\n\t\t\t// split each row by the `<br>` tag\n\t\t\tvar json = html.split('<br class=\"newline\">');\n\t\t\t\n\t\t\t// covert each row to array of strings and objects \n\t\t\tjson = _.map(json, function(str){\n\t\t\t\t\n\t\t\t\t// make a temp DOM element for navigating through child nodes\n\t\t\t\tvar div = document.createElement('div')\n\t\t\t\tdiv.innerHTML = str;\n\t\t\t\t\n\t\t\t\t// row data\n\t\t\t\tvar row = [];\n\t\t\t\t\n\t\t\t\t// make each node an object\n\t\t\t\t_.each(div.childNodes, function(node){\n\t\t\t\t\t\n\t\t\t\t\t// simple string of text\n\t\t\t\t\tif( !node.tagName )\n\t\t\t\t\t\trow.push(node.textContent)\n\t\t\t\t\t\n\t\t\t\t\t// spans are 'tokens', so make them an {}\n\t\t\t\t\telse if( node.tagName == 'SPAN'){\n\t\t\t\t\t\trow.push({\n\t\t\t\t\t\t\tlabel: node.textContent,\n\t\t\t\t\t\t\tattrs: _.clone(node.dataset)\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\treturn row;\n\t\t\t\t\n\t\t\t})\n\t\t\t\n\t\t\treturn json;\n\t\t},\n\t\t\n\t\t// Legacy support until code that relies on old objectTextarea format is updated\n\t\ttoObjectTextarea: function(){\n\t\t\tvar json = this.toJSON();\n\t\t\t\n\t\t\treturn _.map(json, function(row){ return _.map(row, function(d){\n\t\t\t\n\t\t\t\tif( typeof d == 'string' ){\n\t\t\t\t\treturn {type: \"text\", data: {text: d}}\n\t\t\t\t}else{\n\t\t\t\t\tvar attrs = d.attrs;\n\t\t\t\t\tattrs.text = d.label;\n\t\t\t\t\treturn {type: \"bubble\", data: attrs}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t})})\n\t\t},\n\t\t\n\t\tsetSelection: function(start, end) {\n\t\t\t\n\t\t\tvar range = document.createRange(),\n\t\t\t\tcount = 0, startNode, endNode;\n\t\t\t\n\t\t\t_.each(this.el.childNodes, function(node, indx){\n\t\t\t\t\n\t\t\t\tvar len = (node.innerText ? node.innerText.length : node.length) || 0;\n\t\t\t\t\n\t\t\t\tcount = count + len;\n\t\t\t\t\n\t\t\t\t//console.log(count, len);\n\t\t\t\t\n\t\t\t\t// found start of selection\n\t\t\t\tif( (count > start || (count == start && len == 0)) && !startNode ){\n\t\t\t\t\t\n\t\t\t\t\tstartNode = node;\n\t\t\t\t\trange.setStart(node, node.tagName ? 0 : start - (count - len)  )\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif( (count > end || (count == end && len == 0)) && !endNode ){\n\t\t\t\t\t\n\t\t\t\t\tendNode = node;\n\t\t\t\t\t\n\t\t\t\t\tif( node.tagName && len > 0 )\n\t\t\t\t\t\tif( node.nextSibling )\n\t\t\t\t\t\t\trange.setEnd(node.nextSibling, 0)\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\trange.setEnd(node, 0)\n\t\t\t\t\telse\n\t\t\t\t\t\trange.setEnd(node, end - (count - len) )\n\t\t\t\t}\n\t\t\t\t\n\t\t\t})\n\t\t\t\n\t\t\tthis.el.focus();\n\t\t\t\n\t\t\tvar sel = window.getSelection();\n\t\t\tsel.removeAllRanges();\n\t\t\tsel.addRange(range);\n\t\t\t\n\t\t\treturn;\n\t\t\t\n\t\t\t// http://stackoverflow.com/a/16100733/484780\n\t    },\n\t\t\n\t\tgetSelection: function() {\n\t\t\t\n\t\t\tvar sel = window.getSelection();\n\t\t\t\n\t\t\tif( sel.type == 'None' )\n\t\t\t\treturn {\n\t\t\t\t\tstart: this.length(),\n\t\t\t\t\tend: this.length()\n\t\t\t\t}\n\t\t\t\t\n\t        var range = sel.getRangeAt(0);\n\t        \n\t\t\tvar preSelectionRange = range.cloneRange();\n\t        preSelectionRange.selectNodeContents(this.el);\n\t        preSelectionRange.setEnd(range.startContainer, range.startOffset);\n\t        var start = preSelectionRange.toString().length;\n\n\t        return {\n\t            start: start,\n\t            end: start + range.toString().length\n\t        };\n\t    },\n\t\t\n\t\tmetaKey: function(e){\n\t\t\te = e || event;\n\t\t\treturn e && (e.ctrlKey || e.altKey || e.metaKey);\n\t\t},\n\t\t\n\t\tmarkHistory: function(){\n\t\t\t// splices history at current history index (and removes all history after current index)\n\t\t\tthis.history.splice(this.historyAt+1, Number.MAX_VALUE, {\n\t\t\t\tcaret: this.getSelection(),\n\t\t\t\tcontent: this.el.innerHTML\n\t\t\t})\n\t\t\t\n\t\t\tthis.historyAt = this.history.length - 1;\n\t\t},\n\t\t\n\t\tmarkHistoryIn: function(ms){\n\t\t\tclearTimeout( this.historyTimeout )\n\t\t\tthis.historyTimeout = setTimeout(this.markHistory.bind(this), ms||0);\n\t\t},\n\t\t\n\t\tundo: function(){\n\t\t\tif( this.historyAt <= 0 ) return;\n\t\t\tthis.applyHistory(this.history[ --this.historyAt ])\n\t\t},\n\t\t\n\t\tredo: function(){\n\t\t\tif( this.historyAt >= this.history.length - 1 ) return;\n\t\t\tthis.applyHistory(this.history[ ++this.historyAt ])\n\t\t},\n\t\t\n\t\tapplyHistory: function(hist){\n\t\t\tthis.el.innerHTML = hist.content;\n\t\t\tthis.setSelection(hist.caret.start, hist.caret.end)\n\t\t},\n\t\t\n\t})\n\t\n});\n"]}